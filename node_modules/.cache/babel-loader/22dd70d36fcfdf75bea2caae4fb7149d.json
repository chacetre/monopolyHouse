{"ast":null,"code":"import _objectSpread from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useContext,createContext,useState,useEffect}from\"react\";import{Link as RouterLink,withRouter,useLocation}from\"react-router-dom\";import validate from\"validate.js\";import{makeStyles}from\"@material-ui/styles\";import{Grid,Button,IconButton,TextField,Link,Typography}from\"@material-ui/core\";import{useAuth}from\"../../context/auth\";import{useUser}from\"../../context/userInformations\";import firebase from\"firebase/app\";var schema={email:{presence:{allowEmpty:false,message:\"is required\"},email:true,length:{maximum:64}},password:{presence:{allowEmpty:false,message:\"is required\"},length:{maximum:128}}};var useStyles=makeStyles(function(theme){return{root:{backgroundColor:theme.palette.background.default,height:\"100%\",textAlign:\"center\",width:\"100%\"},grid:{height:\"100%\"},quoteContainer:_defineProperty({},theme.breakpoints.down(\"md\"),{display:\"none\"}),quote:{backgroundColor:theme.palette.neutral,height:\"100%\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",backgroundImage:\"url(/images/auth.jpg)\",backgroundSize:\"cover\",backgroundRepeat:\"no-repeat\",backgroundPosition:\"center\"},quoteInner:{textAlign:\"center\",flexBasis:\"600px\"},quoteText:{color:theme.palette.white,fontWeight:300},name:{marginTop:theme.spacing(3),color:theme.palette.white},bio:{color:theme.palette.white},contentContainer:{},content:{height:\"100%\",display:\"flex\",flexDirection:\"column\",textAlign:\"center\"},contentHeader:{display:\"flex\",alignItems:\"center\",paddingTop:theme.spacing(5),paddingBototm:theme.spacing(2),paddingLeft:theme.spacing(2),paddingRight:theme.spacing(2)},logoImage:{marginLeft:theme.spacing(4)},contentBody:_defineProperty({flexGrow:1,display:\"flex\",alignItems:\"center\"},theme.breakpoints.down(\"md\"),{justifyContent:\"center\"}),form:_defineProperty({paddingLeft:100,paddingRight:100,paddingBottom:125,flexBasis:700},theme.breakpoints.down(\"sm\"),{paddingLeft:theme.spacing(2),paddingRight:theme.spacing(2)}),title:{marginTop:theme.spacing(3)},sugestion:{marginTop:theme.spacing(2)},textField:{marginTop:theme.spacing(2)},signInButton:{margin:theme.spacing(2,0)}};});var SignIn=function SignIn(props){var history=props.history;var classes=useStyles();var _useUser=useUser(),setUserInformations=_useUser.setUserInformations;var _useState=useState({isValid:false,values:{},touched:{},errors:{}}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useAuth=useAuth(),setAuthTokens=_useAuth.setAuthTokens;useEffect(function(){var errors=validate(formState.values,schema);setFormState(function(formState){return _objectSpread(_objectSpread({},formState),{},{isValid:errors?false:true,errors:errors||{}});});},[formState.values]);function postLogin(){firebase.auth().signInWithEmailAndPassword(formState.values.email,formState.values.password).then(function(user){console.log(\"user\",user.user.uid);if(user.user!==null){setUserInformations(user.user.uid);var dateNow=new Date().getTime()+86400000;setAuthTokens(dateNow.toString());history.push(\"/select-your-boss\");}else{console.log(\"user error\");}}).catch(function(error){console.log(\"autre error\",error.message);});}var handleChange=function handleChange(event){event.persist();setFormState(function(formState){return _objectSpread(_objectSpread({},formState),{},{values:_objectSpread(_objectSpread({},formState.values),{},_defineProperty({},event.target.name,event.target.type===\"checkbox\"?event.target.checked:event.target.value)),touched:_objectSpread(_objectSpread({},formState.touched),{},_defineProperty({},event.target.name,true))});});};var hasError=function hasError(field){return formState.touched[field]&&formState.errors[field]?true:false;};return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(\"div\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{className:classes.form},/*#__PURE__*/React.createElement(Typography,{className:classes.title,variant:\"h2\"},\"Connexion\"),/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"email\"),fullWidth:true,helperText:hasError(\"email\")?formState.errors.email[0]:null,label:\"Identifiant\",name:\"email\",onChange:handleChange,type:\"text\",value:formState.values.email||\"\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"password\"),fullWidth:true,helperText:hasError(\"password\")?formState.errors.password[0]:null,label:\"Mot de passe\",name:\"password\",onChange:handleChange,type:\"password\",value:formState.values.password||\"\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{className:classes.signInButton,color:\"primary\",disabled:!formState.isValid,fullWidth:true,size:\"large\",onClick:postLogin,variant:\"contained\"},\"Connexion\"))));};export default withRouter(SignIn);","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/SignIn/SignIn.js"],"names":["React","useContext","createContext","useState","useEffect","Link","RouterLink","withRouter","useLocation","validate","makeStyles","Grid","Button","IconButton","TextField","Typography","useAuth","useUser","firebase","schema","email","presence","allowEmpty","message","length","maximum","password","useStyles","theme","root","backgroundColor","palette","background","default","height","textAlign","width","grid","quoteContainer","breakpoints","down","display","quote","neutral","justifyContent","alignItems","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","quoteInner","flexBasis","quoteText","color","white","fontWeight","name","marginTop","spacing","bio","contentContainer","content","flexDirection","contentHeader","paddingTop","paddingBototm","paddingLeft","paddingRight","logoImage","marginLeft","contentBody","flexGrow","form","paddingBottom","title","sugestion","textField","signInButton","margin","SignIn","props","history","classes","setUserInformations","isValid","values","touched","errors","formState","setFormState","setAuthTokens","postLogin","auth","signInWithEmailAndPassword","then","user","console","log","uid","dateNow","Date","getTime","toString","push","catch","error","handleChange","event","persist","target","type","checked","value","hasError","field"],"mappings":"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","sourcesContent":["import React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter, useLocation } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport validate from \"validate.js\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Grid,\n  Button,\n  IconButton,\n  TextField,\n  Link,\n  Typography,\n} from \"@material-ui/core\";\nimport { useAuth } from \"../../context/auth\";\nimport { useUser } from \"../../context/userInformations\";\nimport firebase from \"firebase/app\";\n\nconst schema = {\n  email: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    email: true,\n    length: {\n      maximum: 64,\n    },\n  },\n  password: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 128,\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: \"100%\",\n    textAlign: \"center\",\n    width: \"100%\",\n  },\n  grid: {\n    height: \"100%\",\n  },\n  quoteContainer: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\",\n    },\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundImage: \"url(/images/auth.jpg)\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\",\n  },\n  quoteInner: {\n    textAlign: \"center\",\n    flexBasis: \"600px\",\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300,\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white,\n  },\n  bio: {\n    color: theme.palette.white,\n  },\n  contentContainer: {},\n  content: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    textAlign: \"center\",\n  },\n  contentHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4),\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    [theme.breakpoints.down(\"md\")]: {\n      justifyContent: \"center\",\n    },\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n    },\n  },\n  title: {\n    marginTop: theme.spacing(3),\n  },\n  sugestion: {\n    marginTop: theme.spacing(2),\n  },\n  textField: {\n    marginTop: theme.spacing(2),\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nconst SignIn = (props) => {\n  const { history } = props;\n  const classes = useStyles();\n  const { setUserInformations } = useUser();\n\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {},\n  });\n  const { setAuthTokens } = useAuth();\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n\n    setFormState((formState) => ({\n      ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {},\n    }));\n  }, [formState.values]);\n\n  function postLogin() {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(\n        formState.values.email,\n        formState.values.password\n      )\n      .then((user) => {\n        console.log(\"user\", user.user.uid);\n        if (user.user !== null) {\n          setUserInformations(user.user.uid)\n          var dateNow = new Date().getTime() + 86400000\n          setAuthTokens(dateNow.toString());\n          history.push(\"/select-your-boss\");\n        } else {\n          console.log(\"user error\");\n        }\n      })\n      .catch((error) => {\n        console.log(\"autre error\", error.message);\n      });\n  }\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setFormState((formState) => ({\n      ...formState,\n      values: {\n        ...formState.values,\n        [event.target.name]:\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value,\n      },\n      touched: {\n        ...formState.touched,\n        [event.target.name]: true,\n      },\n    }));\n  };\n\n  const hasError = (field) => {\n    return formState.touched[field] && formState.errors[field]\n      ? true\n      : false;\n  };\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.content}>\n        <div className={classes.form}>\n          <Typography className={classes.title} variant=\"h2\">\n            Connexion\n          </Typography>\n          <TextField\n            className={classes.textField}\n            error={hasError(\"email\")}\n            fullWidth\n            helperText={hasError(\"email\") ? formState.errors.email[0] : null}\n            label=\"Identifiant\"\n            name=\"email\"\n            onChange={handleChange}\n            type=\"text\"\n            value={formState.values.email || \"\"}\n            variant=\"outlined\"\n          />\n          <TextField\n            className={classes.textField}\n            error={hasError(\"password\")}\n            fullWidth\n            helperText={\n              hasError(\"password\") ? formState.errors.password[0] : null\n            }\n            label=\"Mot de passe\"\n            name=\"password\"\n            onChange={handleChange}\n            type=\"password\"\n            value={formState.values.password || \"\"}\n            variant=\"outlined\"\n          />\n          <Button\n            className={classes.signInButton}\n            color=\"primary\"\n            disabled={!formState.isValid}\n            fullWidth\n            size=\"large\"\n            onClick={postLogin}\n            variant=\"contained\"\n          >\n            Connexion\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object,\n};\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}