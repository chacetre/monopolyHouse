{"ast":null,"code":"import _defineProperty from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useEffect}from\"react\";import clsx from\"clsx\";import{makeStyles,withStyles}from\"@material-ui/styles\";import{Modal,Card,CardHeader,CardContent,CardActions,Grid,Divider,Typography,Radio,RadioGroup,FormControlLabel,MenuItem,Button,TextField,Select,InputLabel}from\"@material-ui/core\";import firebase from\"firebase/app\";var useStyles=makeStyles(function(theme){return{root:{position:\"absolute\",top:\"50%\",left:\"50%\",transform:\"translate(-50%, -50%)\",outline:\"none\",boxShadow:theme.shadows[20],width:\"60%\",maxHeight:\"90%\",overflowY:\"auto\",maxWidth:\"100%\"},actions:{justifyContent:\"flex-end\"},center:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},divider:{margin:10}};});function AddOwnerModal(_ref){var open=_ref.open,className=_ref.className,onClose=_ref.onClose,rest=_objectWithoutProperties(_ref,[\"open\",\"className\",\"onClose\"]);var classes=useStyles();var database=firebase.database();var _useState=useState({isValid:false,values:{},touched:{},errors:{}}),_useState2=_slicedToArray(_useState,2),currentOwner=_useState2[0],setCurrentOwner=_useState2[1];function createProprioParticulier(){var timestamp=Date.now();database.ref(\"id_user/owners/\"+timestamp).set({id:timestamp,civility:currentOwner.values.civility,lastname:currentOwner.values.lastname,firstname:currentOwner.values.firstname,isSociety:false,socialIdentity:null,address:{postalCode:\"92789\",city:\"Marseille\",street:\"23 rue henri martin\"},isOwner:true});onClose();}function createProprioEntreprise(){var timestamp=Date.now();database.ref(\"id_user/owners/\"+timestamp).set({id:timestamp,civility:null,lastname:null,firstname:null,isSociety:true,socialIdentity:currentOwner.values.socialIdentity,address:{postalCode:currentOwner.values.postalCode,city:currentOwner.values.city,street:currentOwner.values.street},isOwner:true});onClose();}function createProprio(){if(currentOwner.values.isParticulier===\"true\"){createProprioParticulier();}else{createProprioEntreprise();}}var handleChange=function handleChange(event){event.persist();setCurrentOwner(function(currentOwner){return _objectSpread(_objectSpread({},currentOwner),{},{values:_objectSpread(_objectSpread({},currentOwner.values),{},_defineProperty({},event.target.name,event.target.type===\"checkbox\"?event.target.checked:event.target.value)),touched:_objectSpread(_objectSpread({},currentOwner.touched),{},_defineProperty({},event.target.name,true))});});};var cancelClose=function cancelClose(){onClose();};var hasError=function hasError(field){return currentOwner.touched[field]&&currentOwner.errors[field]?true:false;};if(!open){return null;}return/*#__PURE__*/React.createElement(Modal,{onClose:onClose,open:open},/*#__PURE__*/React.createElement(Card,Object.assign({},rest,{className:clsx(classes.root,className)}),/*#__PURE__*/React.createElement(CardHeader,{title:\"Ajouter un nouveau propriétaire\"}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(RadioGroup,{row:true,\"aria-label\":\"position\",name:\"isParticulier\",defaultValue:\"top\",onChange:handleChange,className:classes.gridCell},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"true\",control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",checked:currentOwner.values.isParticulier===\"true\"}),label:\"Particulier\",labelPlacement:\"right\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"false\",control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",checked:currentOwner.values.isParticulier===\"false\"}),label:\"Entreprise\",labelPlacement:\"right\"})),currentOwner.values.isParticulier===\"true\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RadioGroup,{row:true,\"aria-label\":\"civility\",name:\"civility\",defaultValue:\"top\",onChange:handleChange},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"mr\",control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",checked:currentOwner.values.civility===\"mr\"}),label:\"M.\",labelPlacement:\"right\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"mme\",control:/*#__PURE__*/React.createElement(Radio,{color:\"primary\",checked:currentOwner.values.civility===\"mme\"}),label:\"Mme\",labelPlacement:\"right\"})),/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"firstname\"),fullWidth:true,helperText:hasError(\"firstname\")?currentOwner.errors.firstname[0]:null,label:\"Pr\\xE9nom\",name:\"firstname\",onChange:handleChange,type:\"text\",value:currentOwner.values.firstname||\"\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"lastname\"),fullWidth:true,helperText:hasError(\"lastname\")?currentOwner.errors.lastname[0]:null,label:\"Nom\",name:\"lastname\",onChange:handleChange,type:\"text\",value:currentOwner.values.lastname||\"\",variant:\"outlined\"})),currentOwner.values.isParticulier===\"false\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"socialIdentity\"),fullWidth:true,helperText:hasError(\"socialIdentity\")?currentOwner.errors.socialIdentity[0]:null,label:\"Raison Social\",name:\"socialIdentity\",onChange:handleChange,type:\"text\",value:currentOwner.values.socialIdentity||\"\",variant:\"outlined\"})),/*#__PURE__*/React.createElement(Grid,null,/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"street\"),fullWidth:true,helperText:hasError(\"street\")?currentOwner.errors.street[0]:null,label:\"Numero et rue\",name:\"street\",onChange:handleChange,type:\"text\",value:currentOwner.values.street||\"\",variant:\"outlined\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"postalCode\"),fullWidth:true,helperText:hasError(\"postalCode\")?currentOwner.errors.postalCode[0]:null,label:\"Code Postal\",name:\"postalCode\",onChange:handleChange,type:\"text\",value:currentOwner.values.postalCode||\"\",variant:\"outlined\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:9},/*#__PURE__*/React.createElement(TextField,{className:classes.textField,error:hasError(\"city\"),fullWidth:true,helperText:hasError(\"city\")?currentOwner.errors.city[0]:null,label:\"City\",name:\"city\",onChange:handleChange,type:\"text\",value:currentOwner.values.city||\"\",variant:\"outlined\"})))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardActions,{disableSpacing:true},/*#__PURE__*/React.createElement(Button,{onClick:cancelClose},\"annuler\"),/*#__PURE__*/React.createElement(Button,{onClick:createProprio},\"cr\\xE9er\"))));}AddOwnerModal.defaultProps={open:false,onClose:function onClose(){}};export default AddOwnerModal;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/ChooseBoss/components/AddOwnerModal.js"],"names":["React","useState","useEffect","clsx","makeStyles","withStyles","Modal","Card","CardHeader","CardContent","CardActions","Grid","Divider","Typography","Radio","RadioGroup","FormControlLabel","MenuItem","Button","TextField","Select","InputLabel","firebase","useStyles","theme","root","position","top","left","transform","outline","boxShadow","shadows","width","maxHeight","overflowY","maxWidth","actions","justifyContent","center","display","alignItems","divider","margin","AddOwnerModal","open","className","onClose","rest","classes","database","isValid","values","touched","errors","currentOwner","setCurrentOwner","createProprioParticulier","timestamp","Date","now","ref","set","id","civility","lastname","firstname","isSociety","socialIdentity","address","postalCode","city","street","isOwner","createProprioEntreprise","createProprio","isParticulier","handleChange","event","persist","target","name","type","checked","value","cancelClose","hasError","field","gridCell","textField","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles, withStyles } from \"@material-ui/styles\";\nimport {\n  Modal,\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Grid,\n  Divider,\n  Typography,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  MenuItem,\n  Button,\n  TextField,\n  Select,\n  InputLabel,\n} from \"@material-ui/core\";\nimport firebase from \"firebase/app\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    outline: \"none\",\n    boxShadow: theme.shadows[20],\n    width: \"60%\",\n    maxHeight: \"90%\",\n    overflowY: \"auto\",\n    maxWidth: \"100%\",\n  },\n  actions: {\n    justifyContent: \"flex-end\",\n  },\n  center: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  divider: {\n    margin: 10,\n  },\n}));\n\nfunction AddOwnerModal({ open, className, onClose, ...rest }) {\n  const classes = useStyles();\n  var database = firebase.database();\n  const [currentOwner, setCurrentOwner] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {},\n  });\n\n  function createProprioParticulier() {\n    const timestamp = Date.now();\n\n    database.ref(\"id_user/owners/\" + timestamp).set({\n      id: timestamp,\n      civility: currentOwner.values.civility,\n      lastname: currentOwner.values.lastname,\n      firstname: currentOwner.values.firstname,\n      isSociety: false,\n      socialIdentity: null,\n\n      address: {\n        postalCode: \"92789\",\n        city: \"Marseille\",\n        street: \"23 rue henri martin\",\n      },\n      isOwner: true,\n    });\n\n    onClose();\n  }\n\n  function createProprioEntreprise() {\n    const timestamp = Date.now();\n\n    database.ref(\"id_user/owners/\" + timestamp).set({\n      id: timestamp,\n      civility: null,\n      lastname: null,\n      firstname: null,\n      isSociety: true,\n      socialIdentity: currentOwner.values.socialIdentity,\n      address: {\n        postalCode: currentOwner.values.postalCode,\n        city: currentOwner.values.city,\n        street: currentOwner.values.street,\n      },\n      isOwner: true,\n    });\n\n    onClose();\n  }\n\n  function createProprio(){\n       if (currentOwner.values.isParticulier === \"true\"){\n           createProprioParticulier()\n       } else {\n           createProprioEntreprise()\n       }\n  }\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setCurrentOwner((currentOwner) => ({\n      ...currentOwner,\n      values: {\n        ...currentOwner.values,\n        [event.target.name]:\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value,\n      },\n      touched: {\n        ...currentOwner.touched,\n        [event.target.name]: true,\n      },\n    }));\n  };\n\n  const cancelClose = () => {\n    onClose();\n  };\n\n  const hasError = (field) =>\n    currentOwner.touched[field] && currentOwner.errors[field] ? true : false;\n\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <Modal onClose={onClose} open={open}>\n      <Card {...rest} className={clsx(classes.root, className)}>\n        <CardHeader title={\"Ajouter un nouveau propriétaire\"} />\n        <Divider />\n        <CardContent>\n          <RadioGroup\n            row\n            aria-label=\"position\"\n            name=\"isParticulier\"\n            defaultValue=\"top\"\n            onChange={handleChange}\n            className={classes.gridCell}\n          >\n            <FormControlLabel\n              value={\"true\"}\n              control={\n                <Radio\n                  color=\"primary\"\n                  checked={currentOwner.values.isParticulier === \"true\"}\n                />\n              }\n              label=\"Particulier\"\n              labelPlacement=\"right\"\n            />\n            <FormControlLabel\n              value={\"false\"}\n              control={\n                <Radio\n                  color=\"primary\"\n                  checked={currentOwner.values.isParticulier === \"false\"}\n                />\n              }\n              label=\"Entreprise\"\n              labelPlacement=\"right\"\n            />\n          </RadioGroup>\n\n          {currentOwner.values.isParticulier === \"true\" && (\n            <>\n              <RadioGroup\n                row\n                aria-label=\"civility\"\n                name=\"civility\"\n                defaultValue=\"top\"\n                onChange={handleChange}\n              >\n                <FormControlLabel\n                  value={\"mr\"}\n                  control={\n                    <Radio\n                      color=\"primary\"\n                      checked={currentOwner.values.civility === \"mr\"}\n                    />\n                  }\n                  label=\"M.\"\n                  labelPlacement=\"right\"\n                />\n                <FormControlLabel\n                  value={\"mme\"}\n                  control={\n                    <Radio\n                      color=\"primary\"\n                      checked={currentOwner.values.civility === \"mme\"}\n                    />\n                  }\n                  label=\"Mme\"\n                  labelPlacement=\"right\"\n                />\n              </RadioGroup>\n\n              <TextField\n                className={classes.textField}\n                error={hasError(\"firstname\")}\n                fullWidth\n                helperText={\n                  hasError(\"firstname\")\n                    ? currentOwner.errors.firstname[0]\n                    : null\n                }\n                label=\"Prénom\"\n                name=\"firstname\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.firstname || \"\"}\n                variant=\"outlined\"\n              />\n              <TextField\n                className={classes.textField}\n                error={hasError(\"lastname\")}\n                fullWidth\n                helperText={\n                  hasError(\"lastname\") ? currentOwner.errors.lastname[0] : null\n                }\n                label=\"Nom\"\n                name=\"lastname\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.lastname || \"\"}\n                variant=\"outlined\"\n              />\n            </>\n          )}\n\n          {currentOwner.values.isParticulier === \"false\" && (\n            <>\n              <TextField\n                className={classes.textField}\n                error={hasError(\"socialIdentity\")}\n                fullWidth\n                helperText={\n                  hasError(\"socialIdentity\")\n                    ? currentOwner.errors.socialIdentity[0]\n                    : null\n                }\n                label=\"Raison Social\"\n                name=\"socialIdentity\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.socialIdentity || \"\"}\n                variant=\"outlined\"\n              />\n            </>\n          )}\n\n          <Grid>\n            <Grid item xs={12}>\n              <TextField\n                className={classes.textField}\n                error={hasError(\"street\")}\n                fullWidth\n                helperText={\n                  hasError(\"street\") ? currentOwner.errors.street[0] : null\n                }\n                label=\"Numero et rue\"\n                name=\"street\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.street || \"\"}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={3}>\n              <TextField\n                className={classes.textField}\n                error={hasError(\"postalCode\")}\n                fullWidth\n                helperText={\n                  hasError(\"postalCode\") ? currentOwner.errors.postalCode[0] : null\n                }\n                label=\"Code Postal\"\n                name=\"postalCode\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.postalCode || \"\"}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={9}>\n              <TextField\n                className={classes.textField}\n                error={hasError(\"city\")}\n                fullWidth\n                helperText={\n                  hasError(\"city\") ? currentOwner.errors.city[0] : null\n                }\n                label=\"City\"\n                name=\"city\"\n                onChange={handleChange}\n                type=\"text\"\n                value={currentOwner.values.city || \"\"}\n                variant=\"outlined\"\n              />\n            </Grid>\n          </Grid>\n        </CardContent>\n        <Divider />\n        <CardActions disableSpacing>\n          <Button onClick={cancelClose}>annuler</Button>\n          <Button onClick={createProprio}>créer</Button>\n        </CardActions>\n      </Card>\n    </Modal>\n  );\n}\n\nAddOwnerModal.propTypes = {\n  className: PropTypes.string,\n  onClose: PropTypes.func,\n  open: PropTypes.bool,\n};\n\nAddOwnerModal.defaultProps = {\n  open: false,\n  onClose: () => {},\n};\n\nexport default AddOwnerModal;\n"]},"metadata":{},"sourceType":"module"}