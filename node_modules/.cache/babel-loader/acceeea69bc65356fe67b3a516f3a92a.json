{"ast":null,"code":"var _jsxFileName = \"/Users/charlottecetre/Desktop/Macron business/src/views/SignIn/SignIn.js\";\nimport React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport validate from 'validate.js';\nimport { makeStyles } from '@material-ui/styles';\nimport { Grid, Button, IconButton, TextField, Link, Typography } from '@material-ui/core';\nimport { useAuth } from \"../context/auth\";\nimport Firebase from \"firebase\";\nconst schema = {\n  email: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    },\n    email: true,\n    length: {\n      maximum: 64\n    }\n  },\n  password: {\n    presence: {\n      allowEmpty: false,\n      message: 'is required'\n    },\n    length: {\n      maximum: 128\n    }\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: '100%',\n    textAlign: 'center',\n    width: '100%'\n  },\n  grid: {\n    height: '100%'\n  },\n  quoteContainer: {\n    [theme.breakpoints.down('md')]: {\n      display: 'none'\n    }\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundImage: 'url(/images/auth.jpg)',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n  quoteInner: {\n    textAlign: 'center',\n    flexBasis: '600px'\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white\n  },\n  bio: {\n    color: theme.palette.white\n  },\n  contentContainer: {},\n  content: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    textAlign: 'center'\n  },\n  contentHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4)\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: 'flex',\n    alignItems: 'center',\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'center'\n    }\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down('sm')]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2)\n    }\n  },\n  title: {\n    marginTop: theme.spacing(3)\n  },\n  sugestion: {\n    marginTop: theme.spacing(2)\n  },\n  textField: {\n    marginTop: theme.spacing(2)\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nconst SignIn = props => {\n  const {\n    history\n  } = props;\n  const classes = useStyles();\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  });\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    setAuthTokens\n  } = useAuth();\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n    setFormState(formState => ({ ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]);\n\n  function postLogin() {\n    firebase.auth().signInWithEmailAndPassword(email, password).then(user => {\n      if (result.status === 200) {\n        setAuthTokens(result.data);\n        setLoggedIn(true);\n      } else {\n        setIsError(true);\n      }\n    }).catch(error => {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n    });\n  }\n\n  const handleChange = event => {\n    event.persist();\n    setFormState(formState => ({ ...formState,\n      values: { ...formState.values,\n        [event.target.name]: event.target.type === 'checkbox' ? event.target.checked : event.target.value\n      },\n      touched: { ...formState.touched,\n        [event.target.name]: true\n      }\n    }));\n  };\n\n  const handleSignIn = event => {\n    event.preventDefault();\n    history.push('/dashboard');\n  };\n\n  const hasError = field => formState.touched[field] && formState.errors[field] ? true : false;\n\n  if (isLoggedIn) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 14\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.contentBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    onSubmit: handleSignIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, \"Connexion\"), /*#__PURE__*/React.createElement(TextField, {\n    className: classes.textField,\n    error: hasError('email'),\n    fullWidth: true,\n    helperText: hasError('email') ? formState.errors.email[0] : null,\n    label: \"Identifiant\",\n    name: \"email\",\n    onChange: handleChange,\n    type: \"text\",\n    value: formState.values.email || '',\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    className: classes.textField,\n    error: hasError('password'),\n    fullWidth: true,\n    helperText: hasError('password') ? formState.errors.password[0] : null,\n    label: \"Mot de passe\",\n    name: \"password\",\n    onChange: handleChange,\n    type: \"password\",\n    value: formState.values.password || '',\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.signInButton,\n    color: \"primary\",\n    disabled: !formState.isValid,\n    fullWidth: true,\n    size: \"large\",\n    type: \"submit\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  }, \"Connexion\")))));\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object\n};\nexport default withRouter(SignIn);","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/SignIn/SignIn.js"],"names":["React","useContext","createContext","useState","useEffect","Link","RouterLink","withRouter","useLocation","PropTypes","validate","makeStyles","Grid","Button","IconButton","TextField","Typography","useAuth","Firebase","schema","email","presence","allowEmpty","message","length","maximum","password","useStyles","theme","root","backgroundColor","palette","background","default","height","textAlign","width","grid","quoteContainer","breakpoints","down","display","quote","neutral","justifyContent","alignItems","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","quoteInner","flexBasis","quoteText","color","white","fontWeight","name","marginTop","spacing","bio","contentContainer","content","flexDirection","contentHeader","paddingTop","paddingBototm","paddingLeft","paddingRight","logoImage","marginLeft","contentBody","flexGrow","form","paddingBottom","title","sugestion","textField","signInButton","margin","SignIn","props","history","classes","formState","setFormState","isValid","values","touched","errors","isLoggedIn","setLoggedIn","isError","setIsError","userName","setUserName","setPassword","setAuthTokens","postLogin","firebase","auth","signInWithEmailAndPassword","then","user","result","status","data","catch","error","errorCode","code","errorMessage","handleChange","event","persist","target","type","checked","value","handleSignIn","preventDefault","push","hasError","field","propTypes","object"],"mappings":"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","sourcesContent":["import React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport validate from 'validate.js';\nimport { makeStyles } from '@material-ui/styles';\nimport {\n  Grid,\n  Button,\n  IconButton,\n  TextField,\n  Link,\n  Typography\n} from '@material-ui/core';\nimport { useAuth } from \"../context/auth\";\nimport Firebase from \"firebase\";\n\nconst schema = {\n  email: {\n    presence: { allowEmpty: false, message: 'is required' },\n    email: true,\n    length: {\n      maximum: 64\n    }\n  },\n  password: {\n    presence: { allowEmpty: false, message: 'is required' },\n    length: {\n      maximum: 128\n    }\n  }\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: '100%',\n    textAlign: 'center',\n    width: '100%'\n  },\n  grid: {\n    height: '100%'\n  },\n  quoteContainer: {\n    [theme.breakpoints.down('md')]: {\n      display: 'none'\n    }\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundImage: 'url(/images/auth.jpg)',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center'\n  },\n  quoteInner: {\n    textAlign: 'center',\n    flexBasis: '600px'\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white\n  },\n  bio: {\n    color: theme.palette.white\n  },\n  contentContainer: {},\n  content: {\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    textAlign: 'center'\n  },\n  contentHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4)\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: 'flex',\n    alignItems: 'center',\n    [theme.breakpoints.down('md')]: {\n      justifyContent: 'center'\n    }\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down('sm')]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2)\n    }\n  },\n  title: {\n    marginTop: theme.spacing(3)\n  },\n  sugestion: {\n    marginTop: theme.spacing(2)\n  },\n  textField: {\n    marginTop: theme.spacing(2)\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nconst SignIn = props => {\n  const { history } = props;\n  const classes = useStyles();\n\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  });\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const { setAuthTokens } = useAuth();\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n\n    setFormState(formState => ({\n      ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]);\n\n  function postLogin() {\n    firebase.auth().signInWithEmailAndPassword(email, password)\n  .then((user) => {\n    if (result.status === 200) {\n        setAuthTokens(result.data);\n        setLoggedIn(true);\n      } else {\n        setIsError(true);\n      }\n    \n  })\n  .catch((error) => {\n    var errorCode = error.code;\n    var errorMessage = error.message;\n  });\n}\n  \n  \n\n  const handleChange = event => {\n    event.persist();\n\n    setFormState(formState => ({\n      ...formState,\n      values: {\n        ...formState.values,\n        [event.target.name]:\n          event.target.type === 'checkbox'\n            ? event.target.checked\n            : event.target.value\n      },\n      touched: {\n        ...formState.touched,\n        [event.target.name]: true\n      }\n    }));\n  };\n\n  const handleSignIn = event => {\n    event.preventDefault();\n    history.push('/dashboard');\n  };\n\n  const hasError = field =>\n    formState.touched[field] && formState.errors[field] ? true : false;\n\n    if (isLoggedIn) {\n      return <Redirect to=\"/\" />;\n    }\n\n  return (\n    <div className={classes.root}>\n      \n          <div className={classes.content}>\n            <div className={classes.contentBody}>\n              <form\n                className={classes.form}\n                onSubmit={handleSignIn}\n              >\n                <Typography\n                  className={classes.title}\n                  variant=\"h2\"\n                >\n                  Connexion\n                </Typography>\n                <TextField\n                  className={classes.textField}\n                  error={hasError('email')}\n                  fullWidth\n                  helperText={\n                    hasError('email') ? formState.errors.email[0] : null\n                  }\n                  label=\"Identifiant\"\n                  name=\"email\"\n                  onChange={handleChange}\n                  type=\"text\"\n                  value={formState.values.email || ''}\n                  variant=\"outlined\"\n                />\n                <TextField\n                  className={classes.textField}\n                  error={hasError('password')}\n                  fullWidth\n                  helperText={\n                    hasError('password') ? formState.errors.password[0] : null\n                  }\n                  label=\"Mot de passe\"\n                  name=\"password\"\n                  onChange={handleChange}\n                  type=\"password\"\n                  value={formState.values.password || ''}\n                  variant=\"outlined\"\n                />\n                <Button\n                  className={classes.signInButton}\n                  color=\"primary\"\n                  disabled={!formState.isValid}\n                  fullWidth\n                  size=\"large\"\n                  type=\"submit\"\n                  variant=\"contained\"\n                >\n                  Connexion\n                </Button>\n              </form>\n            </div>\n          </div>\n    </div>\n  );\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object\n};\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}