{"ast":null,"code":"var _jsxFileName = \"/Users/charlottecetre/Desktop/hookpedals/src/views/Dashboard/components/ShoppingList.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport moment from \"moment\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Card, CardActions, CardHeader, CardContent, Button, Divider, Table, TableBody, TableCell, TableHead, TableRow, Tooltip, TableSortLabel } from \"@material-ui/core\";\nimport WarningRounded from \"@material-ui/icons/WarningRounded\";\nimport { getStockDataBase } from \"../../../request/stockAPI\";\nimport { getPedalsDataBase } from \"request/pedalsAPI\";\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  content: {\n    padding: 0\n  },\n  inner: {\n    minWidth: 800\n  },\n  statusContainer: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  status: {\n    marginRight: theme.spacing(1)\n  },\n  actions: {\n    justifyContent: \"flex-end\"\n  }\n}));\nconst statusColors = {\n  delivered: \"success\",\n  pending: \"info\",\n  refunded: \"danger\"\n};\n\nconst ShoppingList = props => {\n  const {\n    className,\n    ...rest\n  } = props;\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const [listLowStock, setListLowStock] = useState([]);\n  const [listComponentsUsed, setListComponentsUsed] = useState([]);\n\n  function getStockLow() {\n    if (data === undefined || data === null || data.componentsStock === undefined) {\n      return;\n    }\n\n    const listComponentLow = [];\n    listComponentsUsed.forEach(componentUsed => {\n      console.log(\"componentUsed\", componentUsed);\n      const pathSplit = componentUsed.split('/');\n      const list = data.componentsStock[pathSplit[0]][pathSplit[1]];\n\n      if (list == undefined) {\n        return;\n      }\n\n      list.forEach(element => {\n        if (element.value == pathSplit[2]) {\n          if (parseInt(element.stock) < parseInt(element.criticalMin)) {\n            const scheme = {\n              type: pathSplit[0].toUpperCase(),\n              value: element.label,\n              stock: element.stock\n            };\n            listComponentLow.push(scheme);\n          }\n        }\n      });\n    });\n    setListLowStock(listComponentLow);\n  }\n\n  function initComponentUsed(listPedals) {\n    const listComponentUsed = [];\n    listPedals.forEach(element => {\n      const components = element.components;\n      Object.values(components).forEach(component => {\n        listComponentUsed.push(component.path);\n      });\n    });\n    setListComponentsUsed(listComponentUsed);\n  }\n\n  useEffect(() => {\n    getStockDataBase(response => {\n      setData(response);\n    });\n    getPedalsDataBase(response => {\n      initComponentUsed(response);\n    });\n  }, []);\n  useEffect(() => {\n    if (data !== undefined) {\n      getStockLow();\n    }\n  }, [data]);\n  return /*#__PURE__*/React.createElement(Card, Object.assign({}, rest, {\n    className: clsx(classes.root, className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Liste de course\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PerfectScrollbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.inner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, \"Composant\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"Stock restant\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, listLowStock.map(order => /*#__PURE__*/React.createElement(TableRow, {\n    hover: true,\n    style: {\n      backgroundColor: order.stock == 0 ? \"#ffebee\" : \"#ffffff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, order.type), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, order.value), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, order.stock)))))))));\n};\n\nShoppingList.propTypes = {\n  className: PropTypes.string\n};\nexport default ShoppingList;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/hookpedals/src/views/Dashboard/components/ShoppingList.js"],"names":["React","useState","useEffect","clsx","moment","PerfectScrollbar","PropTypes","makeStyles","Card","CardActions","CardHeader","CardContent","Button","Divider","Table","TableBody","TableCell","TableHead","TableRow","Tooltip","TableSortLabel","WarningRounded","getStockDataBase","getPedalsDataBase","useStyles","theme","root","content","padding","inner","minWidth","statusContainer","display","alignItems","status","marginRight","spacing","actions","justifyContent","statusColors","delivered","pending","refunded","ShoppingList","props","className","rest","classes","data","setData","listLowStock","setListLowStock","listComponentsUsed","setListComponentsUsed","getStockLow","undefined","componentsStock","listComponentLow","forEach","componentUsed","console","log","pathSplit","split","list","element","value","parseInt","stock","criticalMin","scheme","type","toUpperCase","label","push","initComponentUsed","listPedals","listComponentUsed","components","Object","values","component","path","response","map","order","backgroundColor","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport moment from \"moment\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Button,\n  Divider,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Tooltip,\n  TableSortLabel,\n} from \"@material-ui/core\";\nimport WarningRounded from \"@material-ui/icons/WarningRounded\";\n\nimport { getStockDataBase } from \"../../../request/stockAPI\";\nimport { getPedalsDataBase } from \"request/pedalsAPI\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  content: {\n    padding: 0,\n  },\n  inner: {\n    minWidth: 800,\n  },\n  statusContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  status: {\n    marginRight: theme.spacing(1),\n  },\n  actions: {\n    justifyContent: \"flex-end\",\n  },\n}));\n\nconst statusColors = {\n  delivered: \"success\",\n  pending: \"info\",\n  refunded: \"danger\",\n};\n\nconst ShoppingList = (props) => {\n  const { className, ...rest } = props;\n\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const [listLowStock, setListLowStock] = useState([]);\n  const [listComponentsUsed, setListComponentsUsed] = useState([]);\n\n  function getStockLow() {\n    if (\n      data === undefined ||\n      data === null ||\n      data.componentsStock === undefined\n    ) {\n      return;\n    }\n\n    const listComponentLow = [];\n\n    listComponentsUsed.forEach((componentUsed) => {\n\n      console.log(\"componentUsed\",componentUsed);\n      const pathSplit = componentUsed.split('/');\n      const list = data.componentsStock[pathSplit[0]][pathSplit[1]];\n\n      if (list == undefined){\n        return;\n      }\n      \n      list.forEach((element) => {\n        if (element.value == pathSplit[2]) {\n          if (parseInt(element.stock) < parseInt(element.criticalMin)) {\n            const scheme = {\n              type: pathSplit[0].toUpperCase(),\n              value: element.label,\n              stock: element.stock,\n            };\n\n            listComponentLow.push(scheme);\n          }\n        }\n      });\n    });\n\n    setListLowStock(listComponentLow);\n  }\n\n  function initComponentUsed(listPedals) {\n    const listComponentUsed = [];\n\n    listPedals.forEach((element) => {\n      const components = element.components;\n      Object.values(components).forEach((component) => {\n        listComponentUsed.push(component.path);\n      });\n    });\n\n    setListComponentsUsed(listComponentUsed);\n  }\n\n  useEffect(() => {\n    getStockDataBase((response) => {\n      setData(response);\n    });\n\n    getPedalsDataBase((response) => {\n      initComponentUsed(response);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (data !== undefined) {\n      getStockLow();\n    }\n  }, [data]);\n\n  return (\n    <Card {...rest} className={clsx(classes.root, className)}>\n      <CardHeader title=\"Liste de course\" />\n      <Divider />\n      <CardContent className={classes.content}>\n        <PerfectScrollbar>\n          <div className={classes.inner}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Type</TableCell>\n                  <TableCell>Composant</TableCell>\n                  <TableCell>Stock restant</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {listLowStock.map((order) => (\n                  <TableRow\n                    hover\n                    style={{\n                      backgroundColor: order.stock == 0 ? \"#ffebee\" : \"#ffffff\",\n                    }}\n                  >\n                    <TableCell>{order.type}</TableCell>\n                    <TableCell>{order.value}</TableCell>\n                    <TableCell>{order.stock}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </PerfectScrollbar>\n      </CardContent>\n    </Card>\n  );\n};\n\nShoppingList.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default ShoppingList;\n"]},"metadata":{},"sourceType":"module"}