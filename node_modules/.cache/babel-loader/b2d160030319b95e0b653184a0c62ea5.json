{"ast":null,"code":"var _jsxFileName = \"/Users/charlottecetre/Desktop/hookpedals/src/views/Dashboard/components/ShoppingList.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport moment from \"moment\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Card, CardActions, CardHeader, CardContent, Button, Divider, Table, TableBody, TableCell, TableHead, TableRow, Tooltip, TableSortLabel } from \"@material-ui/core\";\nimport WarningRounded from \"@material-ui/icons/WarningRounded\";\nimport { getStockDataBase } from \"../../../request/stockAPI\";\nimport { getPedalsDataBase } from \"request/pedalsAPI\";\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  content: {\n    padding: 0\n  },\n  inner: {\n    minWidth: 800\n  },\n  statusContainer: {\n    display: \"flex\",\n    alignItems: \"center\"\n  },\n  status: {\n    marginRight: theme.spacing(1)\n  },\n  actions: {\n    justifyContent: \"flex-end\"\n  }\n}));\nconst statusColors = {\n  delivered: \"success\",\n  pending: \"info\",\n  refunded: \"danger\"\n};\n\nconst ShoppingList = props => {\n  const {\n    className,\n    ...rest\n  } = props;\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const [listLowStock, setListLowStock] = useState([]);\n\n  function getStockLow() {\n    if (data === undefined || data === null || data.componentsStock === undefined) {\n      return;\n    }\n\n    const listComponentLow = [];\n    console.log(\"data\", data);\n    const path = \"pcb/pcb/refractor\";\n    const pathSplit = path.split('/');\n    const list = data.componentsStock[pathSplit[0]][pathSplit[1]];\n    console.log(\"listType\", list);\n    list.forEach(element => {\n      console.log(\"element\", element);\n\n      if (element.label == pathSplit[2]) {\n        console.log(\"element\", ok);\n        /* Object.values(element[sousType]).forEach((value) => {\n           if (parseInt(value.stock) < parseInt(value.criticalMin)) {\n             const scheme = {\n               type: element,\n               value: value.label,\n               stock: value.stock,\n             };\n              listComponentLow.push(scheme);\n           }\n         });*/\n      }\n    });\n    setListLowStock(listComponentLow);\n  }\n\n  function initComponentUsed(listPedals) {\n    const listComponentUsed = [];\n    listPedals.forEach(element => {\n      const components = element.components;\n      Object.values(components).forEach(component => {\n        listComponentUsed.push(component.path);\n      });\n    }); //console.log(\"listComponentUsed\", listComponentUsed);\n  }\n\n  useEffect(() => {\n    getStockDataBase(response => {\n      setData(response);\n    });\n    getPedalsDataBase(response => {\n      initComponentUsed(response);\n    });\n  }, []);\n  useEffect(() => {\n    if (data !== undefined) {\n      getStockLow();\n    }\n  }, [data]);\n  return /*#__PURE__*/React.createElement(Card, Object.assign({}, rest, {\n    className: clsx(classes.root, className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Liste de course\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PerfectScrollbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.inner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, \"Type\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, \"Composant\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, \"Stock restant\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, listLowStock.map(order => /*#__PURE__*/React.createElement(TableRow, {\n    hover: true,\n    style: {\n      backgroundColor: order.stock == 0 ? \"#ffebee\" : \"#ffffff\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, order.type), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, order.value), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, order.stock)))))))));\n};\n\nShoppingList.propTypes = {\n  className: PropTypes.string\n};\nexport default ShoppingList;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/hookpedals/src/views/Dashboard/components/ShoppingList.js"],"names":["React","useState","useEffect","clsx","moment","PerfectScrollbar","PropTypes","makeStyles","Card","CardActions","CardHeader","CardContent","Button","Divider","Table","TableBody","TableCell","TableHead","TableRow","Tooltip","TableSortLabel","WarningRounded","getStockDataBase","getPedalsDataBase","useStyles","theme","root","content","padding","inner","minWidth","statusContainer","display","alignItems","status","marginRight","spacing","actions","justifyContent","statusColors","delivered","pending","refunded","ShoppingList","props","className","rest","classes","data","setData","listLowStock","setListLowStock","getStockLow","undefined","componentsStock","listComponentLow","console","log","path","pathSplit","split","list","forEach","element","label","ok","initComponentUsed","listPedals","listComponentUsed","components","Object","values","component","push","response","map","order","backgroundColor","stock","type","value","propTypes","string"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,gBAAP,MAA6B,yBAA7B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,SACEC,IADF,EAEEC,WAFF,EAGEC,UAHF,EAIEC,WAJF,EAKEC,MALF,EAMEC,OANF,EAOEC,KAPF,EAQEC,SARF,EASEC,SATF,EAUEC,SAVF,EAWEC,QAXF,EAYEC,OAZF,EAaEC,cAbF,QAcO,mBAdP;AAeA,OAAOC,cAAP,MAA2B,mCAA3B;AAEA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,iBAAT,QAAkC,mBAAlC;AAEA,MAAMC,SAAS,GAAGjB,UAAU,CAAEkB,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE,EADiC;AAEvCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE;AADF,GAF8B;AAKvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AADL,GALgC;AAQvCC,EAAAA,eAAe,EAAE;AACfC,IAAAA,OAAO,EAAE,MADM;AAEfC,IAAAA,UAAU,EAAE;AAFG,GARsB;AAYvCC,EAAAA,MAAM,EAAE;AACNC,IAAAA,WAAW,EAAEV,KAAK,CAACW,OAAN,CAAc,CAAd;AADP,GAZ+B;AAevCC,EAAAA,OAAO,EAAE;AACPC,IAAAA,cAAc,EAAE;AADT;AAf8B,CAAZ,CAAD,CAA5B;AAoBA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,SADQ;AAEnBC,EAAAA,OAAO,EAAE,MAFU;AAGnBC,EAAAA,QAAQ,EAAE;AAHS,CAArB;;AAMA,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAC9B,QAAM;AAAEC,IAAAA,SAAF;AAAa,OAAGC;AAAhB,MAAyBF,KAA/B;AAEA,QAAMG,OAAO,GAAGvB,SAAS,EAAzB;AACA,QAAM,CAACwB,IAAD,EAAOC,OAAP,IAAkBhD,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACiD,YAAD,EAAeC,eAAf,IAAkClD,QAAQ,CAAC,EAAD,CAAhD;;AAEA,WAASmD,WAAT,GAAuB;AACrB,QACEJ,IAAI,KAAKK,SAAT,IACAL,IAAI,KAAK,IADT,IAEAA,IAAI,CAACM,eAAL,KAAyBD,SAH3B,EAIE;AACA;AACD;;AAED,UAAME,gBAAgB,GAAG,EAAzB;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBT,IAApB;AAGA,UAAMU,IAAI,GAAG,mBAAb;AACA,UAAMC,SAAS,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAlB;AAEA,UAAMC,IAAI,GAAGb,IAAI,CAACM,eAAL,CAAqBK,SAAS,CAAC,CAAD,CAA9B,EAAmCA,SAAS,CAAC,CAAD,CAA5C,CAAb;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,IAAxB;AAEAA,IAAAA,IAAI,CAACC,OAAL,CAAcC,OAAD,IAAa;AACxBP,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBM,OAAvB;;AACE,UAAIA,OAAO,CAACC,KAAR,IAAiBL,SAAS,CAAC,CAAD,CAA9B,EAAmC;AACjCH,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBQ,EAAvB;AAGD;;;;;;;;;;AAWA;AAEJ,KAnBD;AAqBAd,IAAAA,eAAe,CAACI,gBAAD,CAAf;AACD;;AAED,WAASW,iBAAT,CAA2BC,UAA3B,EAAsC;AAEpC,UAAMC,iBAAiB,GAAG,EAA1B;AAEAD,IAAAA,UAAU,CAACL,OAAX,CAAmBC,OAAO,IAAI;AAC5B,YAAMM,UAAU,GAAGN,OAAO,CAACM,UAA3B;AACAC,MAAAA,MAAM,CAACC,MAAP,CAAcF,UAAd,EAA0BP,OAA1B,CAAkCU,SAAS,IAAI;AAC7CJ,QAAAA,iBAAiB,CAACK,IAAlB,CAAuBD,SAAS,CAACd,IAAjC;AACD,OAFD;AAID,KAND,EAJoC,CAYpC;AACD;;AAEDxD,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,gBAAgB,CAAEoD,QAAD,IAAc;AAC7BzB,MAAAA,OAAO,CAACyB,QAAD,CAAP;AACD,KAFe,CAAhB;AAIAnD,IAAAA,iBAAiB,CAAEmD,QAAD,IAAc;AAC9BR,MAAAA,iBAAiB,CAACQ,QAAD,CAAjB;AACD,KAFgB,CAAjB;AAGD,GARQ,EAQN,EARM,CAAT;AAUAxE,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI8C,IAAI,KAAKK,SAAb,EAAwB;AACtBD,MAAAA,WAAW;AACZ;AACF,GAJQ,EAIN,CAACJ,IAAD,CAJM,CAAT;AAMA,sBACE,oBAAC,IAAD,oBAAUF,IAAV;AAAgB,IAAA,SAAS,EAAE3C,IAAI,CAAC4C,OAAO,CAACrB,IAAT,EAAemB,SAAf,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAEE,OAAO,CAACpB,OAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAEoB,OAAO,CAAClB,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHF,CADF,CADF,eAQE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGqB,YAAY,CAACyB,GAAb,CAAkBC,KAAD,iBAChB,oBAAC,QAAD;AAAU,IAAA,KAAK,MAAf;AAAgB,IAAA,KAAK,EAAE;AAAEC,MAAAA,eAAe,EAAED,KAAK,CAACE,KAAN,IAAe,CAAf,GAAmB,SAAnB,GAA+B;AAAlD,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYF,KAAK,CAACG,IAAlB,CADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYH,KAAK,CAACI,KAAlB,CAFF,eAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAYJ,KAAK,CAACE,KAAlB,CAHF,CADD,CADH,CARF,CADF,CADF,CADF,CAHF,CADF;AA8BD,CAhHD;;AAkHAnC,YAAY,CAACsC,SAAb,GAAyB;AACvBpC,EAAAA,SAAS,EAAEvC,SAAS,CAAC4E;AADE,CAAzB;AAIA,eAAevC,YAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport moment from \"moment\";\nimport PerfectScrollbar from \"react-perfect-scrollbar\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Card,\n  CardActions,\n  CardHeader,\n  CardContent,\n  Button,\n  Divider,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Tooltip,\n  TableSortLabel,\n} from \"@material-ui/core\";\nimport WarningRounded from \"@material-ui/icons/WarningRounded\"\n\nimport { getStockDataBase } from \"../../../request/stockAPI\";\nimport { getPedalsDataBase } from \"request/pedalsAPI\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  content: {\n    padding: 0,\n  },\n  inner: {\n    minWidth: 800,\n  },\n  statusContainer: {\n    display: \"flex\",\n    alignItems: \"center\",\n  },\n  status: {\n    marginRight: theme.spacing(1),\n  },\n  actions: {\n    justifyContent: \"flex-end\",\n  },\n}));\n\nconst statusColors = {\n  delivered: \"success\",\n  pending: \"info\",\n  refunded: \"danger\",\n};\n\nconst ShoppingList = (props) => {\n  const { className, ...rest } = props;\n\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const [listLowStock, setListLowStock] = useState([]);\n\n  function getStockLow() {\n    if (\n      data === undefined ||\n      data === null ||\n      data.componentsStock === undefined\n    ) {\n      return;\n    }\n\n    const listComponentLow = [];\n\n    console.log(\"data\", data);\n    \n\n    const path = \"pcb/pcb/refractor\";\n    const pathSplit = path.split('/');\n\n    const list = data.componentsStock[pathSplit[0]][pathSplit[1]];\n    console.log(\"listType\", list);\n\n    list.forEach((element) => {\n      console.log(\"element\", element);\n        if (element.label == pathSplit[2]) {\n          console.log(\"element\", ok);\n          \n\n         /* Object.values(element[sousType]).forEach((value) => {\n            if (parseInt(value.stock) < parseInt(value.criticalMin)) {\n              const scheme = {\n                type: element,\n                value: value.label,\n                stock: value.stock,\n              };\n\n              listComponentLow.push(scheme);\n            }\n          });*/\n        }\n      \n    });\n\n    setListLowStock(listComponentLow);\n  }\n\n  function initComponentUsed(listPedals){\n\n    const listComponentUsed = [];\n\n    listPedals.forEach(element => {\n      const components = element.components;\n      Object.values(components).forEach(component => {\n        listComponentUsed.push(component.path);\n      });\n      \n    });\n\n    //console.log(\"listComponentUsed\", listComponentUsed);\n  }\n\n  useEffect(() => {\n    getStockDataBase((response) => {\n      setData(response);\n    });\n\n    getPedalsDataBase((response) => {\n      initComponentUsed(response)\n    })\n  }, []);\n\n  useEffect(() => {\n    if (data !== undefined) {\n      getStockLow();\n    }\n  }, [data]);\n\n  return (\n    <Card {...rest} className={clsx(classes.root, className)}>\n      <CardHeader title=\"Liste de course\" />\n      <Divider />\n      <CardContent className={classes.content}>\n        <PerfectScrollbar>\n          <div className={classes.inner}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Type</TableCell>\n                  <TableCell>Composant</TableCell>\n                  <TableCell>Stock restant</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {listLowStock.map((order) => (\n                  <TableRow hover style={{ backgroundColor: order.stock == 0 ? \"#ffebee\" : \"#ffffff\" }}> \n                    <TableCell>{order.type}</TableCell>\n                    <TableCell>{order.value}</TableCell>\n                    <TableCell>{order.stock}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </PerfectScrollbar>\n      </CardContent>\n    </Card>\n  );\n};\n\nShoppingList.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default ShoppingList;\n"]},"metadata":{},"sourceType":"module"}