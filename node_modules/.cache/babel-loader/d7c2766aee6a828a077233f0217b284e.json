{"ast":null,"code":"import _defineProperty from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles,withStyles}from\"@material-ui/styles\";import{Typography,Grid,Card,CardContent,CardActions,Button,IconButton,CardHeader,TextField,Radio,RadioGroup,FormControlLabel,Paper}from\"@material-ui/core\";import{colors}from\"@material-ui/core\";import ToggleButton from\"@material-ui/lab/ToggleButton\";import ToggleButtonGroup from\"@material-ui/lab/ToggleButtonGroup\";import DeleteRounded from\"@material-ui/icons/DeleteRounded\";import CreateRounded from\"@material-ui/icons/CreateRounded\";import Particulier from\"./Particulier\";import Society from\"./Society\";import{useOwner}from\"../../../context/owner\";import{updateAccomodation}from\"request/accomodationAPI\";var CssTextField=withStyles({root:{\"& label.Mui-focused\":{color:\"green\"},\"& .MuiInput-underline:after\":{borderBottomColor:\"green\"},\"& .MuiOutlinedInput-root\":{\"& fieldset\":{borderColor:\"red\"},\"&:hover fieldset\":{borderColor:\"yellow\"},\"&.Mui-focused fieldset\":{borderColor:\"green\"},\"&.Mui-disabled fieldset\":{borderColor:\"#90D8FF\"}},\"& label.Mui-disabled\":{color:\"#486C7F\"}}})(TextField);var useStyles=makeStyles(function(theme){return{root:{padding:theme.spacing(3)},paper:{padding:10},titleBar:{backgroundColor:theme.palette.primary.main,color:colors.grey[50],marginBottom:10,textAlign:\"center\",padding:10},right:{textAlign:\"right\"},left:{paddingTop:10,textAlign:\"left\"},gridCell:{justifyContent:\"center\"},cellRight:{textAlign:\"right\",paddingRight:25},titleSection:{marginBottom:2,marginLeft:10},textWhite:{color:colors.grey[50]},center:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},container:{padding:15},button:{marginRight:20,marginLeft:20},btnAction:{backgroundColor:theme.palette.action.main,color:theme.palette.white},containerTitle:{paddingTop:10}};});var CardAccommodation=function CardAccommodation(accomodationInfos){var classes=useStyles();var _useOwner=useOwner(),ownerInformations=_useOwner.ownerInformations;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentAccommo=_useState2[0],setCurrentAccommo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isModifying=_useState4[0],setModify=_useState4[1];var handleChange=function handleChange(event){event.persist();setCurrentAccommo(function(formState){return _objectSpread(_objectSpread({},formState),{},_defineProperty({},event.target.name,event.target.value));});};var handleChangeLoyer=function handleChangeLoyer(event){event.persist();var re=/^[0-9\\b]+$/;if(event.target.value===\"\"||re.test(event.target.value)){setCurrentAccommo(function(formState){return _objectSpread(_objectSpread({},formState),{},{loyer:_objectSpread(_objectSpread({},formState.loyer),{},_defineProperty({},event.target.name,event.target.value))});});}};var handleChangeRental=function handleChangeRental(event){event.persist();setCurrentAccommo(function(formState){return _objectSpread(_objectSpread({},formState),{},{rental:_objectSpread(_objectSpread({},formState.rental),{},_defineProperty({},event.target.name,event.target.value))});});};function calculateTotal(){var numFixe=Number(currentAccommo.loyer.fixe);var numCharges=Number(currentAccommo.loyer.charges);var numTVA=currentAccommo.isCommercial!=undefined?Number(currentAccommo.loyer.tva):0;return numFixe+numCharges+numTVA;}function handleModify(){if(isModifying){updateAccomodation(currentAccommo);}setModify(function(prev){return!prev;});}useEffect(function(){if(accomodationInfos!=undefined){setCurrentAccommo(accomodationInfos.accomodationInfos);}},[accomodationInfos]);return/*#__PURE__*/React.createElement(Paper,{variant:\"outlined\",className:classes.container},/*#__PURE__*/React.createElement(Paper,{elvation:0,className:classes.titleBar},/*#__PURE__*/React.createElement(Typography,{variant:\"h3\",className:classes.textWhite},currentAccommo.address!=undefined&&/*#__PURE__*/React.createElement(React.Fragment,null,currentAccommo.address.street,\" -\",\" \",currentAccommo.address.postalCode,\" \",currentAccommo.address.city.toUpperCase())),/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",className:classes.textWhite},currentAccommo.address!=undefined&&currentAccommo.address.otherInformations)),/*#__PURE__*/React.createElement(Paper,{elevation:0},/*#__PURE__*/React.createElement(RadioGroup,{row:true,name:\"isCommercial\",defaultValue:\"top\",onChange:handleChange,className:classes.center},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"false\",control:/*#__PURE__*/React.createElement(Radio,{color:\"secondary\",checked:currentAccommo.isCommercial===\"false\"}),label:\"Habitation\",labelPlacement:\"right\",disabled:!isModifying}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"true\",control:/*#__PURE__*/React.createElement(Radio,{color:\"secondary\",checked:currentAccommo.isCommercial===\"true\"}),label:\"Local Commercial\",disabled:!isModifying,labelPlacement:\"right\"})),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:4,className:classes.containerTitle},/*#__PURE__*/React.createElement(Grid,{item:true,className:classes.gridCell},/*#__PURE__*/React.createElement(\"div\",{className:classes.containerTitle},/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",className:classes.titleSection},\"Locataire\"),/*#__PURE__*/React.createElement(Typography,{variant:\"overline\",className:classes.titleSection},\"Date d'entr\\xE9e :\",\" \",currentAccommo.rental!=undefined?currentAccommo.rental.startDate:\"\"))),/*#__PURE__*/React.createElement(Grid,{item:true,className:classes.gridCell},/*#__PURE__*/React.createElement(RadioGroup,{row:true,\"aria-label\":\"position\",name:\"isParticulier\",defaultValue:\"top\",onChange:handleChangeRental,className:classes.paper},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"true\",control:/*#__PURE__*/React.createElement(Radio,{color:\"secondary\",checked:currentAccommo.rental!=undefined&&currentAccommo.rental.isParticulier===\"true\"}),label:\"Particulier\",disabled:!isModifying,labelPlacement:\"right\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"false\",control:/*#__PURE__*/React.createElement(Radio,{color:\"secondary\",checked:currentAccommo.rental!=undefined&&currentAccommo.rental.isParticulier===\"false\"}),label:\"Entreprise\",labelPlacement:\"right\",disabled:!isModifying})))),currentAccommo.rental!=undefined&&currentAccommo.rental.isParticulier==\"true\"&&/*#__PURE__*/React.createElement(Paper,{elevation:0,className:classes.paper},/*#__PURE__*/React.createElement(Particulier,{disabled:isModifying,currentOwner:currentAccommo,handleChange:handleChangeRental})),currentAccommo.rental!=undefined&&currentAccommo.rental.isParticulier==\"false\"&&/*#__PURE__*/React.createElement(Paper,{elevation:0,className:classes.paper},/*#__PURE__*/React.createElement(Society,{disabled:isModifying,currentOwner:currentAccommo,handleChange:handleChangeRental}))),/*#__PURE__*/React.createElement(Typography,{variant:\"h4\",className:classes.titleSection},\"Loyer\"),/*#__PURE__*/React.createElement(Typography,{variant:\"overline\",className:classes.titleSection},\"Indice Insee de ref : \",currentAccommo.loyer!=undefined&&currentAccommo.loyer.insee),/*#__PURE__*/React.createElement(Paper,{elevation:0,className:classes.paper},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,lg:3,md:3,xs:3},/*#__PURE__*/React.createElement(TextField,{size:\"small\",label:\"Fixe\",variant:\"outlined\",fullWidth:true,disabled:!isModifying,name:\"fixe\",value:currentAccommo.loyer!=undefined&&currentAccommo.loyer.fixe||\"\",onChange:handleChangeLoyer})),/*#__PURE__*/React.createElement(Grid,{item:true,lg:3,md:3,xs:3},/*#__PURE__*/React.createElement(TextField,{size:\"small\",label:\"Charges\",variant:\"outlined\",fullWidth:true,disabled:!isModifying,name:\"charges\",value:currentAccommo.loyer!=undefined&&currentAccommo.loyer.charges||\"\",onChange:handleChangeLoyer})),currentAccommo.isCommercial==\"true\"&&/*#__PURE__*/React.createElement(Grid,{item:true,lg:3,md:3,xs:3},/*#__PURE__*/React.createElement(TextField,{size:\"small\",label:\"TVA en %\",variant:\"outlined\",fullWidth:true,disabled:!isModifying,name:\"tva\",value:currentAccommo.loyer!=undefined&&currentAccommo.loyer.tva||\"\",onChange:handleChangeLoyer})),/*#__PURE__*/React.createElement(Grid,{item:true,lg:3,md:3,xs:3,className:classes.gridCell},/*#__PURE__*/React.createElement(CssTextField,{size:\"small\",label:\"Total\",variant:\"outlined\",fullWidth:true,value:currentAccommo.loyer!=undefined&&calculateTotal(),disabled:true,inputProps:{\"aria-label\":\"naked\"}})))),/*#__PURE__*/React.createElement(Paper,{elevation:0,className:classes.paper},/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.containerTitle},/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:6},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\"},\"Revision de loyer\")),/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:6,className:classes.right},/*#__PURE__*/React.createElement(Button,{className:classes.button},\"Supprimer\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",startIcon:/*#__PURE__*/React.createElement(CreateRounded,null),onClick:handleModify},!isModifying&&\"Modifier\",isModifying&&\"Sauvegarder\")))));};export default CardAccommodation;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/Accomodation/Components/CardAccomodation.js"],"names":["React","useState","useEffect","makeStyles","withStyles","Typography","Grid","Card","CardContent","CardActions","Button","IconButton","CardHeader","TextField","Radio","RadioGroup","FormControlLabel","Paper","colors","ToggleButton","ToggleButtonGroup","DeleteRounded","CreateRounded","Particulier","Society","useOwner","updateAccomodation","CssTextField","root","color","borderBottomColor","borderColor","useStyles","theme","padding","spacing","paper","titleBar","backgroundColor","palette","primary","main","grey","marginBottom","textAlign","right","left","paddingTop","gridCell","justifyContent","cellRight","paddingRight","titleSection","marginLeft","textWhite","center","display","alignItems","container","button","marginRight","btnAction","action","white","containerTitle","CardAccommodation","accomodationInfos","classes","ownerInformations","currentAccommo","setCurrentAccommo","isModifying","setModify","handleChange","event","persist","formState","target","name","value","handleChangeLoyer","re","test","loyer","handleChangeRental","rental","calculateTotal","numFixe","Number","fixe","numCharges","charges","numTVA","isCommercial","undefined","tva","handleModify","prev","address","street","postalCode","city","toUpperCase","otherInformations","startDate","isParticulier","insee"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles, withStyles } from \"@material-ui/styles\";\nimport { func } from \"prop-types\";\nimport {\n  Typography,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Button,\n  IconButton,\n  CardHeader,\n  TextField,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  Paper,\n} from \"@material-ui/core\";\nimport { colors } from \"@material-ui/core\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport ToggleButtonGroup from \"@material-ui/lab/ToggleButtonGroup\";\nimport DeleteRounded from \"@material-ui/icons/DeleteRounded\";\nimport CreateRounded from \"@material-ui/icons/CreateRounded\";\nimport Particulier from \"./Particulier\";\nimport Society from \"./Society\";\nimport { useOwner } from \"../../../context/owner\";\nimport { updateAccomodation } from \"request/accomodationAPI\";\n\nconst CssTextField = withStyles({\n  root: {\n    \"& label.Mui-focused\": {\n      color: \"green\",\n    },\n    \"& .MuiInput-underline:after\": {\n      borderBottomColor: \"green\",\n    },\n    \"& .MuiOutlinedInput-root\": {\n      \"& fieldset\": {\n        borderColor: \"red\",\n      },\n      \"&:hover fieldset\": {\n        borderColor: \"yellow\",\n      },\n      \"&.Mui-focused fieldset\": {\n        borderColor: \"green\",\n      },\n      \"&.Mui-disabled fieldset\": {\n        borderColor: \"#90D8FF\",\n      },\n    },\n    \"& label.Mui-disabled\": {\n      color: \"#486C7F\",\n    },\n  },\n})(TextField);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3),\n  },\n  paper: {\n    padding: 10,\n  },\n  titleBar: {\n    backgroundColor: theme.palette.primary.main,\n    color: colors.grey[50],\n    marginBottom: 10,\n    textAlign: \"center\",\n    padding: 10,\n  },\n  right: {\n    textAlign: \"right\",\n  },\n  left: {\n    paddingTop: 10,\n    textAlign: \"left\",\n  },\n  gridCell: {\n    justifyContent: \"center\",\n  },\n  cellRight: {\n    textAlign: \"right\",\n    paddingRight: 25,\n  },\n  titleSection: {\n    marginBottom: 2,\n    marginLeft: 10,\n  },\n  textWhite: {\n    color: colors.grey[50],\n  },\n  center: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  container: {\n    padding: 15,\n  },\n  button: {\n    marginRight: 20,\n    marginLeft: 20,\n  },\n  btnAction: {\n    backgroundColor: theme.palette.action.main,\n    color: theme.palette.white,\n  },\n  containerTitle: {\n    paddingTop: 10,\n  },\n}));\n\nconst CardAccommodation = (accomodationInfos) => {\n  const classes = useStyles();\n  const { ownerInformations } = useOwner();\n  const [currentAccommo, setCurrentAccommo] = useState({});\n  const [isModifying, setModify] = useState(false);\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setCurrentAccommo((formState) => ({\n      ...formState,\n      [event.target.name]: event.target.value,\n    }));\n  };\n\n  const handleChangeLoyer = (event) => {\n    event.persist();\n\n    const re = /^[0-9\\b]+$/;\n\n    if (event.target.value === \"\" || re.test(event.target.value)) {\n      setCurrentAccommo((formState) => ({\n        ...formState,\n        loyer: {\n          ...formState.loyer,\n          [event.target.name]: event.target.value,\n        },\n      }));\n    }\n  };\n\n  const handleChangeRental = (event) => {\n    event.persist();\n\n    setCurrentAccommo((formState) => ({\n      ...formState,\n      rental: {\n        ...formState.rental,\n        [event.target.name]: event.target.value,\n      },\n    }));\n  };\n\n  function calculateTotal() {\n    var numFixe = Number(currentAccommo.loyer.fixe);\n    var numCharges = Number(currentAccommo.loyer.charges);\n    var numTVA =\n      currentAccommo.isCommercial != undefined\n        ? Number(currentAccommo.loyer.tva)\n        : 0;\n\n    return numFixe + numCharges + numTVA;\n  }\n\n  function handleModify() {\n    if (isModifying) {\n      updateAccomodation(currentAccommo);\n    }\n    setModify((prev) => !prev);\n  }\n\n  useEffect(() => {\n    if (accomodationInfos != undefined) {\n      setCurrentAccommo(accomodationInfos.accomodationInfos);\n    }\n  }, [accomodationInfos]);\n\n  return (\n    <Paper variant=\"outlined\" className={classes.container}>\n      <Paper elvation={0} className={classes.titleBar}>\n        <Typography variant=\"h3\" className={classes.textWhite}>\n          {currentAccommo.address != undefined && (\n            <>\n              {currentAccommo.address.street} -{\" \"}\n              {currentAccommo.address.postalCode}{\" \"}\n              {currentAccommo.address.city.toUpperCase()}\n            </>\n          )}\n        </Typography>\n\n        <Typography variant=\"h4\" className={classes.textWhite}>\n          {currentAccommo.address != undefined &&\n            currentAccommo.address.otherInformations}\n        </Typography>\n      </Paper>\n      <Paper elevation={0}>\n        <RadioGroup\n          row\n          name=\"isCommercial\"\n          defaultValue=\"top\"\n          onChange={handleChange}\n          className={classes.center}\n        >\n          <FormControlLabel\n            value={\"false\"}\n            control={\n              <Radio\n                color=\"secondary\"\n                checked={currentAccommo.isCommercial === \"false\"}\n              />\n            }\n            label=\"Habitation\"\n            labelPlacement=\"right\"\n            disabled={!isModifying}\n          />\n          <FormControlLabel\n            value={\"true\"}\n            control={\n              <Radio\n                color=\"secondary\"\n                checked={currentAccommo.isCommercial === \"true\"}\n              />\n            }\n            label=\"Local Commercial\"\n            disabled={!isModifying}\n            labelPlacement=\"right\"\n          />\n        </RadioGroup>\n\n        <Grid container spacing={4} className={classes.containerTitle}>\n          <Grid item className={classes.gridCell}>\n            <div className={classes.containerTitle}>\n              <Typography variant=\"h4\" className={classes.titleSection}>\n                Locataire\n              </Typography>\n              <Typography variant=\"overline\" className={classes.titleSection}>\n                Date d'entrée :{\" \"}\n                {currentAccommo.rental != undefined\n                  ? currentAccommo.rental.startDate\n                  : \"\"}\n              </Typography>\n            </div>\n          </Grid>\n          <Grid item className={classes.gridCell}>\n            <RadioGroup\n              row\n              aria-label=\"position\"\n              name=\"isParticulier\"\n              defaultValue=\"top\"\n              onChange={handleChangeRental}\n              className={classes.paper}\n            >\n              <FormControlLabel\n                value={\"true\"}\n                control={\n                  <Radio\n                    color=\"secondary\"\n                    checked={\n                      currentAccommo.rental != undefined &&\n                      currentAccommo.rental.isParticulier === \"true\"\n                    }\n                  />\n                }\n                label=\"Particulier\"\n                disabled={!isModifying}\n                labelPlacement=\"right\"\n              />\n              <FormControlLabel\n                value={\"false\"}\n                control={\n                  <Radio\n                    color=\"secondary\"\n                    checked={\n                      currentAccommo.rental != undefined &&\n                      currentAccommo.rental.isParticulier === \"false\"\n                    }\n                  />\n                }\n                label=\"Entreprise\"\n                labelPlacement=\"right\"\n                disabled={!isModifying}\n              />\n            </RadioGroup>\n          </Grid>\n        </Grid>\n\n        {currentAccommo.rental != undefined &&\n          currentAccommo.rental.isParticulier == \"true\" && (\n            <Paper elevation={0} className={classes.paper}>\n              <Particulier\n                disabled={isModifying}\n                currentOwner={currentAccommo}\n                handleChange={handleChangeRental}\n              />\n            </Paper>\n          )}\n\n        {currentAccommo.rental != undefined &&\n          currentAccommo.rental.isParticulier == \"false\" && (\n            <Paper elevation={0} className={classes.paper}>\n              <Society\n                disabled={isModifying}\n                currentOwner={currentAccommo}\n                handleChange={handleChangeRental}\n              />\n            </Paper>\n          )}\n      </Paper>\n      <Typography variant=\"h4\" className={classes.titleSection}>\n        Loyer\n      </Typography>\n      <Typography variant=\"overline\" className={classes.titleSection}>\n        Indice Insee de ref : {currentAccommo.loyer != undefined && currentAccommo.loyer.insee}\n      </Typography>\n\n      <Paper elevation={0} className={classes.paper}>\n        <Grid container spacing={2}>\n          <Grid item lg={3} md={3} xs={3}>\n            <TextField\n              size=\"small\"\n              label=\"Fixe\"\n              variant=\"outlined\"\n              fullWidth\n              disabled={!isModifying}\n              name=\"fixe\"\n              value={\n                (currentAccommo.loyer != undefined &&\n                  currentAccommo.loyer.fixe) ||\n                \"\"\n              }\n              onChange={handleChangeLoyer}\n            />\n          </Grid>\n\n          <Grid item lg={3} md={3} xs={3}>\n            <TextField\n              size=\"small\"\n              label=\"Charges\"\n              variant=\"outlined\"\n              fullWidth\n              disabled={!isModifying}\n              name=\"charges\"\n              value={\n                (currentAccommo.loyer != undefined &&\n                  currentAccommo.loyer.charges) ||\n                \"\"\n              }\n              onChange={handleChangeLoyer}\n            />\n          </Grid>\n          {currentAccommo.isCommercial == \"true\" && (\n            <Grid item lg={3} md={3} xs={3}>\n              <TextField\n                size=\"small\"\n                label=\"TVA en %\"\n                variant=\"outlined\"\n                fullWidth\n                disabled={!isModifying}\n                name=\"tva\"\n                value={\n                  (currentAccommo.loyer != undefined &&\n                    currentAccommo.loyer.tva) ||\n                  \"\"\n                }\n                onChange={handleChangeLoyer}\n              />\n            </Grid>\n          )}\n\n          <Grid item lg={3} md={3} xs={3} className={classes.gridCell}>\n            <CssTextField\n              size=\"small\"\n              label=\"Total\"\n              variant=\"outlined\"\n              fullWidth\n              value={currentAccommo.loyer != undefined && calculateTotal()}\n              disabled\n              inputProps={{ \"aria-label\": \"naked\" }}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n      <Paper elevation={0} className={classes.paper}>\n        <Grid container className={classes.containerTitle}>\n          <Grid item md={6} xs={6}>\n            <Button variant=\"contained\" color=\"secondary\">\n              Revision de loyer\n            </Button>\n          </Grid>\n          <Grid item md={6} xs={6} className={classes.right}>\n            <Button className={classes.button}>Supprimer</Button>\n            <Button\n              variant=\"contained\"\n              startIcon={<CreateRounded />}\n              onClick={handleModify}\n            >\n              {!isModifying && \"Modifier\"}\n              {isModifying && \"Sauvegarder\"}\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Paper>\n  );\n};\n\nexport default CardAccommodation;\n"]},"metadata":{},"sourceType":"module"}