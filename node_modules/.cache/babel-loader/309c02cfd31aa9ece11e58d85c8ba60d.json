{"ast":null,"code":"var _jsxFileName = \"/Users/charlottecetre/Desktop/Macron business/src/views/Receipt/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { func } from \"prop-types\";\nimport { Typography, Button, Divider, IconButton } from \"@material-ui/core\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport html2canvas from \"html2canvas\";\nimport Template from \"./Template\";\nimport jsPDF from \"jspdf\";\nimport { AddRounded } from \"@material-ui/icons\";\nimport { useUser } from \"../../context/userInformations\";\nimport { getAccomodationByOwner } from \"request/accomodationAPI\";\nimport MonthYearPicker from \"components/MonthYearPicker\";\n\nfunction createData(name, calories, fat, carbs, protein) {\n  return {\n    name,\n    calories,\n    fat,\n    carbs,\n    protein\n  };\n}\n\nconst rows = [createData(\"23 rue henri Martin - 92170\", \"Appartement 1A\", \"M. CETRE\", 24, 4.0), createData(\"23 rue henri Martin - 92170\", \"Maison\", \"M. Fitoussi\", 24, 4.0), createData(\"23 rue henri Martin - 92170\", \"Appartement 3A\", \"M. BAUMERT\", 24, 4.0), createData(\"67 rue des champignons- 92170\", \"Appartement RDC\", \"M. MACRON\", 24, 4.0)];\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(3),\n    margin: theme.spacing(2)\n  },\n  content: {\n    marginBottom: theme.spacing(2)\n  },\n  destinataire: {\n    color: theme.palette.primary.main\n  },\n  expediteur: {\n    textAlign: \"right\"\n  },\n  page: {\n    position: \"absolute\",\n    opacity: 0,\n    pointerEvents: \"none\"\n  },\n  pageBis: {\n    backgroundColor: \"#fff000\",\n    width: \"210mm\",\n    height: \"297mm\",\n    padding: 30\n  },\n  divider: {\n    margin: 20\n  },\n  test: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  }\n}));\n\nconst Receipt = () => {\n  const classes = useStyles();\n  const currentDate = new Date().toLocaleString(\"default\", {\n    month: \"long\",\n    year: \"numeric\"\n  });\n  const {\n    userInformations\n  } = useUser();\n  const [accommodations, setData] = useState(null);\n  const [showPicker, setShowPicker] = useState(true);\n\n  function createPDF() {\n    console.log(\"create PDF\");\n    const input = document.querySelector(\".divToPrint\");\n\n    if (input != null) {\n      html2canvas(input).then(canvas => {\n        const image = canvas.toDataURL(\"image/png\");\n        const pdf = jsPDF(\"p\", \"mm\", \"a4\");\n        const width = 210;\n        const height = 297;\n        pdf.addImage(image, 0, 0, width, height);\n        pdf.save(\"download.pdf\");\n      });\n    } else {\n      console.log(\"isNULL\");\n    }\n  }\n\n  function calculateLoyer(estate) {\n    var numFixe = Number(estate.loyer.fixe);\n    var numCharges = Number(estate.loyer.charges);\n    var numTVA = estate.isCommercial == undefined ? Number(estate.loyer.tva) : 0;\n    return numFixe + numCharges + numTVA;\n  }\n\n  function getAccommodationsInformations() {\n    getAccomodationByOwner(userInformations.id, response => {\n      setData(response);\n    });\n  }\n\n  function showCalendar() {\n    setShowPicker(prev => !prev);\n  }\n\n  useEffect(() => {\n    getAccommodationsInformations();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, \"EDITION DES QUITTANCES ET APPELS DE LOYER\"), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"overline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, \"Date actuelle:\", \" \", currentDate.toLocaleString(\"default\", {\n    month: \"long\"\n  }))), /*#__PURE__*/React.createElement(MonthYearPicker, {\n    open: showPicker,\n    initialValue: currentDate.toLocaleString(\"default\", {\n      month: \"long\"\n    }),\n    onClose: (monthReturn, yearReturn) => {\n      console.log(\"return value\", monthReturn);\n      setShowPicker(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, \"Logements\"), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \"Locataire\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"Montant du loyer\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"Appel de loyer\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Quittance\"))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, accommodations != undefined && Object.values(accommodations).map(row => /*#__PURE__*/React.createElement(TableRow, {\n    key: row.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, row.address.street.toUpperCase()), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, row.address.otherInformations), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, row.address.city.toUpperCase())), /*#__PURE__*/React.createElement(TableCell, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, !row.isParticulier ? row.rental.civility.toUpperCase() + \" \" + row.rental.firstname.toUpperCase() + \" \" + row.rental.lastname.toUpperCase() : row.rental.socialIdentity), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 19\n    }\n  }, calculateLoyer(row), \" \\u20AC\"), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    onClick: createPDF,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, currentDate), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: showCalendar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AddRounded, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(TableCell, {\n    align: \"right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    onClick: createPDF,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, currentDate), /*#__PURE__*/React.createElement(IconButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AddRounded, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 23\n    }\n  })))))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"divToPrint\",\n    className: classes.page,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"divToPrint \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.pageBis,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.destinataire,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, \"Monsieur Macron\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, \"14 rue de Massenet\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, \"75016 Paris\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.expediteur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, \"Locataire\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }, \"Adresse\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 15\n    }\n  }, \"Ville\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, \"QUITTANCE DE LOYER\"), /*#__PURE__*/React.createElement(Divider, {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, \"Mademoiselle,\"), /*#__PURE__*/React.createElement(Divider, {\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, \"Je vous remercie d'avoir effectu\\xE9 le versement du montant de votre loyer pour la periode du x au x MONTH pour les locaaux que vous occupez sis \\xE0 VILLES, ADRESSE, et dont le detail est cidessous:\"))))));\n};\n\nexport default Receipt;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/Receipt/index.js"],"names":["React","useState","useEffect","makeStyles","func","Typography","Button","Divider","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","html2canvas","Template","jsPDF","AddRounded","useUser","getAccomodationByOwner","MonthYearPicker","createData","name","calories","fat","carbs","protein","rows","useStyles","theme","root","padding","spacing","margin","content","marginBottom","destinataire","color","palette","primary","main","expediteur","textAlign","page","position","opacity","pointerEvents","pageBis","backgroundColor","width","height","divider","test","display","justifyContent","alignItems","Receipt","classes","currentDate","Date","toLocaleString","month","year","userInformations","accommodations","setData","showPicker","setShowPicker","createPDF","console","log","input","document","querySelector","then","canvas","image","toDataURL","pdf","addImage","save","calculateLoyer","estate","numFixe","Number","loyer","fixe","numCharges","charges","numTVA","isCommercial","undefined","tva","getAccommodationsInformations","id","response","showCalendar","prev","monthReturn","yearReturn","table","Object","values","map","row","address","street","toUpperCase","otherInformations","city","isParticulier","rental","civility","firstname","lastname","socialIdentity"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { func } from \"prop-types\";\nimport { Typography, Button, Divider, IconButton } from \"@material-ui/core\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport html2canvas from \"html2canvas\";\nimport Template from \"./Template\";\nimport jsPDF from \"jspdf\";\nimport { AddRounded } from \"@material-ui/icons\";\nimport { useUser } from \"../../context/userInformations\";\nimport { getAccomodationByOwner } from \"request/accomodationAPI\";\nimport MonthYearPicker from \"components/MonthYearPicker\";\n\nfunction createData(name, calories, fat, carbs, protein) {\n  return { name, calories, fat, carbs, protein };\n}\n\nconst rows = [\n  createData(\n    \"23 rue henri Martin - 92170\",\n    \"Appartement 1A\",\n    \"M. CETRE\",\n    24,\n    4.0\n  ),\n  createData(\"23 rue henri Martin - 92170\", \"Maison\", \"M. Fitoussi\", 24, 4.0),\n  createData(\n    \"23 rue henri Martin - 92170\",\n    \"Appartement 3A\",\n    \"M. BAUMERT\",\n    24,\n    4.0\n  ),\n  createData(\n    \"67 rue des champignons- 92170\",\n    \"Appartement RDC\",\n    \"M. MACRON\",\n    24,\n    4.0\n  ),\n];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3),\n    margin: theme.spacing(2),\n  },\n  content: {\n    marginBottom: theme.spacing(2),\n  },\n  destinataire: {\n    color: theme.palette.primary.main,\n  },\n  expediteur: {\n    textAlign: \"right\",\n  },\n  page: {\n    position: \"absolute\",\n    opacity: 0,\n    pointerEvents: \"none\",\n  },\n  pageBis: {\n    backgroundColor: \"#fff000\",\n    width: \"210mm\",\n    height: \"297mm\",\n    padding: 30,\n  },\n  divider: {\n    margin: 20,\n  },\n  test: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n}));\n\nconst Receipt = () => {\n  const classes = useStyles();\n  const currentDate = new Date().toLocaleString(\"default\", {\n    month: \"long\",\n    year: \"numeric\",\n  });\n  const { userInformations } = useUser();\n  const [accommodations, setData] = useState(null);\n  const [showPicker, setShowPicker] = useState(true);\n\n  function createPDF() {\n    console.log(\"create PDF\");\n\n    const input = document.querySelector(\".divToPrint\");\n    if (input != null) {\n      html2canvas(input).then((canvas) => {\n        const image = canvas.toDataURL(\"image/png\");\n        const pdf = jsPDF(\"p\", \"mm\", \"a4\");\n        const width = 210;\n        const height = 297;\n        pdf.addImage(image, 0, 0, width, height);\n        pdf.save(\"download.pdf\");\n      });\n    } else {\n      console.log(\"isNULL\");\n    }\n  }\n\n  function calculateLoyer(estate) {\n    var numFixe = Number(estate.loyer.fixe);\n    var numCharges = Number(estate.loyer.charges);\n    var numTVA =\n      estate.isCommercial == undefined ? Number(estate.loyer.tva) : 0;\n\n    return numFixe + numCharges + numTVA;\n  }\n\n  function getAccommodationsInformations() {\n    getAccomodationByOwner(userInformations.id, (response) => {\n      setData(response);\n    });\n  }\n\n  function showCalendar() {\n    setShowPicker((prev) => !prev);\n  }\n\n  useEffect(() => {\n    getAccommodationsInformations();\n  }, []);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.content}>\n        <Typography variant=\"h2\">\n          EDITION DES QUITTANCES ET APPELS DE LOYER\n        </Typography>\n        <Typography variant=\"overline\">\n          Date actuelle:{\" \"}\n          {currentDate.toLocaleString(\"default\", { month: \"long\" })}\n        </Typography>\n      </div>\n\n      <MonthYearPicker\n        open={showPicker}\n        initialValue={currentDate.toLocaleString(\"default\", { month: \"long\" })}\n        onClose={(monthReturn, yearReturn) => {\n          console.log(\"return value\", monthReturn);\n          setShowPicker(false);\n        }}\n      />\n\n      <TableContainer component={Paper}>\n        <Table className={classes.table} aria-label=\"simple table\">\n          <TableHead>\n            <TableRow>\n              <TableCell>Logements</TableCell>\n              <TableCell>Locataire</TableCell>\n              <TableCell align=\"right\">Montant du loyer</TableCell>\n              <TableCell align=\"right\">Appel de loyer</TableCell>\n              <TableCell align=\"right\">Quittance</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {accommodations != undefined &&\n              Object.values(accommodations).map((row) => (\n                <TableRow key={row.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    <div>{row.address.street.toUpperCase()}</div>\n                    <div>{row.address.otherInformations}</div>\n                    <div>{row.address.city.toUpperCase()}</div>\n                  </TableCell>\n                  <TableCell>\n                    {!row.isParticulier\n                      ? row.rental.civility.toUpperCase() +\n                        \" \" +\n                        row.rental.firstname.toUpperCase() +\n                        \" \" +\n                        row.rental.lastname.toUpperCase()\n                      : row.rental.socialIdentity}\n                  </TableCell>\n                  <TableCell align=\"right\">{calculateLoyer(row)} €</TableCell>\n                  <TableCell align=\"right\">\n                    <Button\n                      size=\"small\"\n                      variant=\"contained\"\n                      onClick={createPDF}\n                    >\n                      {currentDate}\n                    </Button>\n                    <IconButton onClick={showCalendar}>\n                      <AddRounded />\n                    </IconButton>\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <Button\n                      size=\"small\"\n                      variant=\"contained\"\n                      onClick={createPDF}\n                    >\n                      {currentDate}\n                    </Button>\n                    <IconButton>\n                      <AddRounded />\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n\n      <div id=\"divToPrint\" className={classes.page}>\n        <div class=\"divToPrint \">\n          <div className={classes.pageBis}>\n            <div className={classes.destinataire}>\n              <p>Monsieur Macron</p>\n              <p>14 rue de Massenet</p>\n              <p>75016 Paris</p>\n            </div>\n            <div className={classes.expediteur}>\n              <p>Locataire</p>\n              <p>Adresse</p>\n              <p>Ville</p>\n            </div>\n\n            <div>\n              <h1>QUITTANCE DE LOYER</h1>\n              <Divider className={classes.divider} />\n            </div>\n            <div>\n              <p>Mademoiselle,</p>\n              <Divider className={classes.divider} />\n              <p>\n                Je vous remercie d'avoir effectué le versement du montant de\n                votre loyer pour la periode du x au x MONTH pour les locaaux que\n                vous occupez sis à VILLES, ADRESSE, et dont le detail est\n                cidessous:\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Receipt;\n"]},"metadata":{},"sourceType":"module"}