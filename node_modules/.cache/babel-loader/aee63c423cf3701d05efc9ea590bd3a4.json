{"ast":null,"code":"import _defineProperty from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles,withStyles}from\"@material-ui/styles\";import{Typography,Grid,TextField,Button}from\"@material-ui/core\";import{getIndexesAPI,updateIndexesAPI,saveNewIndex}from\"request/settingsAPI\";var trimesters=[\"T1\",\"T2\",\"T3\",\"T4\"];var useStyles=makeStyles(function(theme){return{root:{},button:{marginBottom:30},titleCell:{marginBottom:10},cellRight:{textAlign:\"right\",paddingRight:25},white:{marginTop:10,display:\"flex\",backgroundColor:theme.palette.white,borderRadius:10}};});var IndexInsee=function IndexInsee(){var classes=useStyles();var currentDate=new Date().toLocaleString(\"default\",{year:\"numeric\"});var years=[Number(currentDate),Number(currentDate)-1,Number(currentDate)-2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),indexes=_useState2[0],setIndexes=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isChange=_useState4[0],setChange=_useState4[1];function getIndexes(){getIndexesAPI(function(response){setIndexes(response);});}function handleChange(event){event.persist();setChange(true);setIndexes(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},event.target.name,event.target.value));});}function handleSave(){updateIndexesAPI(indexes);setChange(false);}useEffect(function(){getIndexes();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:5},/*#__PURE__*/React.createElement(Grid,{item:true,lg:6,md:6,xs:6},/*#__PURE__*/React.createElement(Typography,{variant:\"h1\"},\"Les index INSEE\"),/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},\"Ici tu peux modifier les locataires des logements ainsi qu'ajouter un logement via le button ajouter.\")),/*#__PURE__*/React.createElement(Grid,{item:true,lg:6,md:6,xs:6,className:classes.cellRight},isChange&&/*#__PURE__*/React.createElement(Button,{className:classes.button,variant:\"contained\",onClick:handleSave},\"Sauvegarder\"))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:5,className:classes.white},years.map(function(year){return/*#__PURE__*/React.createElement(Grid,{item:true,lg:4,md:4,xs:4,className:classes.title},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",className:classes.titleCell},year),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},trimesters.map(function(value){return/*#__PURE__*/React.createElement(Grid,{item:true,lg:3,md:3,xs:3,className:classes.title},/*#__PURE__*/React.createElement(TextField,{name:year+\"_\"+value,size:\"small\",fullWidth:true,label:value,value:indexes[year+\"_\"+value]||\"\",type:\"number\",onChange:handleChange,variant:\"outlined\"}));})));})));};export default IndexInsee;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/Settings/Components/IndexInsee.js"],"names":["React","useState","useEffect","makeStyles","withStyles","Typography","Grid","TextField","Button","getIndexesAPI","updateIndexesAPI","saveNewIndex","trimesters","useStyles","theme","root","button","marginBottom","titleCell","cellRight","textAlign","paddingRight","white","marginTop","display","backgroundColor","palette","borderRadius","IndexInsee","classes","currentDate","Date","toLocaleString","year","years","Number","indexes","setIndexes","isChange","setChange","getIndexes","response","handleChange","event","persist","prev","target","name","value","handleSave","map","title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles, withStyles } from \"@material-ui/styles\";\nimport { func } from \"prop-types\";\nimport { Typography, Grid, TextField, Button } from \"@material-ui/core\";\nimport {\n  getIndexesAPI,\n  updateIndexesAPI,\n  saveNewIndex,\n} from \"request/settingsAPI\";\n\nconst trimesters = [\"T1\", \"T2\", \"T3\", \"T4\"];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  button: {\n    marginBottom: 30,\n  },\n  titleCell: {\n    marginBottom: 10,\n  },\n  cellRight: {\n    textAlign: \"right\",\n    paddingRight: 25,\n  },\n  white: {\n    marginTop: 10,\n    display: \"flex\",\n    backgroundColor: theme.palette.white,\n    borderRadius : 10\n  },\n}));\n\nconst IndexInsee = () => {\n  const classes = useStyles();\n  const currentDate = new Date().toLocaleString(\"default\", {\n    year: \"numeric\",\n  });\n  const years = [\n    Number(currentDate),\n    Number(currentDate) - 1,\n    Number(currentDate) - 2,\n  ];\n  const [indexes, setIndexes] = useState({});\n  const [isChange, setChange] = useState(false);\n\n  function getIndexes() {\n    getIndexesAPI((response) => {\n      setIndexes(response);\n    });\n  }\n\n  function handleChange(event) {\n    event.persist();\n    setChange(true);\n\n    setIndexes((prev) => ({\n      ...prev,\n      [event.target.name]: event.target.value,\n    }));\n  }\n\n  function handleSave() {\n    updateIndexesAPI(indexes);\n    setChange(false);\n  }\n\n  useEffect(() => {\n    getIndexes();\n  }, []);\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={5}>\n        <Grid item lg={6} md={6} xs={6}>\n          <Typography variant=\"h1\">Les index INSEE</Typography>\n          <Typography variant=\"body1\">\n            Ici tu peux modifier les locataires des logements ainsi qu'ajouter\n            un logement via le button ajouter.\n          </Typography>\n        </Grid>\n        <Grid item lg={6} md={6} xs={6} className={classes.cellRight}>\n          {isChange && (\n            <Button\n              className={classes.button}\n              variant=\"contained\"\n              onClick={handleSave}\n            >\n              Sauvegarder\n            </Button>\n          )}\n        </Grid>\n      </Grid>\n      <Grid container spacing={5} className={classes.white}>\n        {years.map((year) => (\n          <Grid item lg={4} md={4} xs={4} className={classes.title}>\n            <Typography variant=\"h5\" className={classes.titleCell}>\n              {year}\n            </Typography>\n            <Grid container spacing={2}>\n              {trimesters.map((value) => (\n                <Grid item lg={3} md={3} xs={3} className={classes.title}>\n                  <TextField\n                    name={year + \"_\" + value}\n                    size=\"small\"\n                    fullWidth\n                    label={value}\n                    value={indexes[year + \"_\" + value] || \"\"}\n                    type=\"number\"\n                    onChange={handleChange}\n                    variant=\"outlined\"\n                  />\n                </Grid>\n              ))}\n            </Grid>\n          </Grid>\n        ))}\n      </Grid>\n    </div>\n  );\n};\n\nexport default IndexInsee;\n"]},"metadata":{},"sourceType":"module"}