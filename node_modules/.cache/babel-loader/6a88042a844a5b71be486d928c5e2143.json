{"ast":null,"code":"var _jsxFileName = \"/Users/charlottecetre/Desktop/Macron business/src/views/SignIn/SignIn.js\";\nimport React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter, useLocation } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport validate from \"validate.js\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Grid, Button, IconButton, TextField, Link, Typography } from \"@material-ui/core\";\nimport { useAuth } from \"../../context/auth\";\nimport { useUser } from \"../../context/userInformations\";\nimport firebase from \"firebase/app\";\nconst schema = {\n  email: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    email: true,\n    length: {\n      maximum: 64\n    }\n  },\n  password: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    length: {\n      maximum: 128\n    }\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: \"100%\",\n    textAlign: \"center\",\n    width: \"100%\"\n  },\n  grid: {\n    height: \"100%\"\n  },\n  quoteContainer: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\"\n    }\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundImage: \"url(/images/auth.jpg)\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\"\n  },\n  quoteInner: {\n    textAlign: \"center\",\n    flexBasis: \"600px\"\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white\n  },\n  bio: {\n    color: theme.palette.white\n  },\n  contentContainer: {},\n  content: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    textAlign: \"center\"\n  },\n  contentHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4)\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    [theme.breakpoints.down(\"md\")]: {\n      justifyContent: \"center\"\n    }\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2)\n    }\n  },\n  title: {\n    marginTop: theme.spacing(3)\n  },\n  sugestion: {\n    marginTop: theme.spacing(2)\n  },\n  textField: {\n    marginTop: theme.spacing(2)\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nconst SignIn = props => {\n  const {\n    history\n  } = props;\n  const classes = useStyles();\n  const {\n    setUserInformations\n  } = useUser();\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  });\n  const {\n    setAuthTokens\n  } = useAuth();\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n    setFormState(formState => ({ ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]);\n\n  function postLogin() {\n    firebase.auth().signInWithEmailAndPassword(formState.values.email, formState.values.password).then(user => {\n      console.log(\"user\", user.user.uid);\n\n      if (user.user !== null) {\n        setUserInformations(user.user.uid);\n        var dateNow = new Date().getTime() + 86400000;\n        setAuthTokens(dateNow.toString());\n        history.push(\"/select-your-boss\");\n      } else {\n        console.log(\"user error\");\n      }\n    }).catch(error => {\n      console.log(\"autre error\", error.message);\n    });\n  }\n\n  const handleChange = event => {\n    event.persist();\n    setFormState(formState => ({ ...formState,\n      values: { ...formState.values,\n        [event.target.name]: event.target.type === \"checkbox\" ? event.target.checked : event.target.value\n      },\n      touched: { ...formState.touched,\n        [event.target.name]: true\n      }\n    }));\n  };\n\n  const hasError = field => formState.touched[field] && formState.errors[field] ? true : false;\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.title,\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, \"Connexion\"), /*#__PURE__*/React.createElement(TextField, {\n    className: classes.textField,\n    error: hasError(\"email\"),\n    fullWidth: true,\n    helperText: hasError(\"email\") ? formState.errors.email[0] : null,\n    label: \"Identifiant\",\n    name: \"email\",\n    onChange: handleChange,\n    type: \"text\",\n    value: formState.values.email || \"\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    className: classes.textField,\n    error: hasError(\"password\"),\n    fullWidth: true,\n    helperText: hasError(\"password\") ? formState.errors.password[0] : null,\n    label: \"Mot de passe\",\n    name: \"password\",\n    onChange: handleChange,\n    type: \"password\",\n    value: formState.values.password || \"\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.signInButton,\n    color: \"primary\",\n    disabled: !formState.isValid,\n    fullWidth: true,\n    size: \"large\",\n    onClick: postLogin,\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }, \"Connexion\"))));\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object\n};\nexport default withRouter(SignIn);","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/SignIn/SignIn.js"],"names":["React","useContext","createContext","useState","useEffect","Link","RouterLink","withRouter","useLocation","PropTypes","validate","makeStyles","Grid","Button","IconButton","TextField","Typography","useAuth","useUser","firebase","schema","email","presence","allowEmpty","message","length","maximum","password","useStyles","theme","root","backgroundColor","palette","background","default","height","textAlign","width","grid","quoteContainer","breakpoints","down","display","quote","neutral","justifyContent","alignItems","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","quoteInner","flexBasis","quoteText","color","white","fontWeight","name","marginTop","spacing","bio","contentContainer","content","flexDirection","contentHeader","paddingTop","paddingBototm","paddingLeft","paddingRight","logoImage","marginLeft","contentBody","flexGrow","form","paddingBottom","title","sugestion","textField","signInButton","margin","SignIn","props","history","classes","setUserInformations","formState","setFormState","isValid","values","touched","errors","setAuthTokens","postLogin","auth","signInWithEmailAndPassword","then","user","console","log","uid","dateNow","Date","getTime","toString","push","catch","error","handleChange","event","persist","target","type","checked","value","hasError","field","propTypes","object"],"mappings":"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","sourcesContent":["import React, { useContext, createContext, useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter, useLocation } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport validate from \"validate.js\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Grid,\n  Button,\n  IconButton,\n  TextField,\n  Link,\n  Typography,\n} from \"@material-ui/core\";\nimport { useAuth } from \"../../context/auth\";\nimport { useUser } from \"../../context/userInformations\";\nimport firebase from \"firebase/app\";\n\nconst schema = {\n  email: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    email: true,\n    length: {\n      maximum: 64,\n    },\n  },\n  password: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 128,\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: \"100%\",\n    textAlign: \"center\",\n    width: \"100%\",\n  },\n  grid: {\n    height: \"100%\",\n  },\n  quoteContainer: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\",\n    },\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundImage: \"url(/images/auth.jpg)\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\",\n  },\n  quoteInner: {\n    textAlign: \"center\",\n    flexBasis: \"600px\",\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300,\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white,\n  },\n  bio: {\n    color: theme.palette.white,\n  },\n  contentContainer: {},\n  content: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    textAlign: \"center\",\n  },\n  contentHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4),\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    [theme.breakpoints.down(\"md\")]: {\n      justifyContent: \"center\",\n    },\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n    },\n  },\n  title: {\n    marginTop: theme.spacing(3),\n  },\n  sugestion: {\n    marginTop: theme.spacing(2),\n  },\n  textField: {\n    marginTop: theme.spacing(2),\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nconst SignIn = (props) => {\n  const { history } = props;\n  const classes = useStyles();\n  const { setUserInformations } = useUser();\n\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {},\n  });\n  const { setAuthTokens } = useAuth();\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n\n    setFormState((formState) => ({\n      ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {},\n    }));\n  }, [formState.values]);\n\n  function postLogin() {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(\n        formState.values.email,\n        formState.values.password\n      )\n      .then((user) => {\n        console.log(\"user\", user.user.uid);\n        if (user.user !== null) {\n          setUserInformations(user.user.uid)\n          var dateNow = new Date().getTime() + 86400000\n          setAuthTokens(dateNow.toString());\n          history.push(\"/select-your-boss\");\n        } else {\n          console.log(\"user error\");\n        }\n      })\n      .catch((error) => {\n        console.log(\"autre error\", error.message);\n      });\n  }\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setFormState((formState) => ({\n      ...formState,\n      values: {\n        ...formState.values,\n        [event.target.name]:\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value,\n      },\n      touched: {\n        ...formState.touched,\n        [event.target.name]: true,\n      },\n    }));\n  };\n\n  const hasError = (field) =>\n    formState.touched[field] && formState.errors[field] ? true : false;\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.content}>\n        <div className={classes.form}>\n          <Typography className={classes.title} variant=\"h2\">\n            Connexion\n          </Typography>\n          <TextField\n            className={classes.textField}\n            error={hasError(\"email\")}\n            fullWidth\n            helperText={hasError(\"email\") ? formState.errors.email[0] : null}\n            label=\"Identifiant\"\n            name=\"email\"\n            onChange={handleChange}\n            type=\"text\"\n            value={formState.values.email || \"\"}\n            variant=\"outlined\"\n          />\n          <TextField\n            className={classes.textField}\n            error={hasError(\"password\")}\n            fullWidth\n            helperText={\n              hasError(\"password\") ? formState.errors.password[0] : null\n            }\n            label=\"Mot de passe\"\n            name=\"password\"\n            onChange={handleChange}\n            type=\"password\"\n            value={formState.values.password || \"\"}\n            variant=\"outlined\"\n          />\n          <Button\n            className={classes.signInButton}\n            color=\"primary\"\n            disabled={!formState.isValid}\n            fullWidth\n            size=\"large\"\n            onClick={postLogin}\n            variant=\"contained\"\n          >\n            Connexion\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object,\n};\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}