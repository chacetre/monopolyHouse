{"ast":null,"code":"import _objectSpread from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/charlottecetre/Desktop/Macron business/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/styles\";import{Divider,Grid,Typography}from\"@material-ui/core\";import{database}from\"firebase\";var lastDay={janvier:31,fevrier:28,mars:31,avril:30,mai:31,juin:30,juillet:31,aout:31,septembre:30,octobre:31,novembre:30,decembe:31};var civilityTranslation={m:\"Monsieur\",mme:\"Madame\"};var useStyles=makeStyles(function(theme){return{root:{padding:theme.spacing(3),margin:theme.spacing(2)},content:{marginBottom:theme.spacing(2)},destinataire:{display:\"row\",textAlign:\"left\"},expediteur:{textAlign:\"right\"},page:{position:\"absolute\",opacity:0,pointerEvents:\"none\",fontSize:30},pageBis:{padding:30,fontSize:20},divider:{margin:15,backgroundColor:theme.palette.white},montant:{width:\"50%\",textAlign:\"left\"}};});var TemplateGenerator=function TemplateGenerator(_ref){var owner=_ref.owner,accomodation=_ref.accomodation,date=_ref.date,display=_ref.display,template=_ref.template,rest=_objectWithoutProperties(_ref,[\"owner\",\"accomodation\",\"date\",\"display\",\"template\"]);var classes=useStyles();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),dateReceipt=_useState2[0],setDateReceipt=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),templateLocal=_useState4[0],setTemplate=_useState4[1];function calculateTotal(){var numFixe=Number(accomodation.loyer.fixe);var numCharges=Number(accomodation.loyer.charges);var numTVA=accomodation.isCommercial==undefined?Number(accomodation.loyer.tva):0;return numFixe+numCharges+numTVA;}function change(textChange){var textTranslate=textChange.replace(\"[rent.civility]\",civilityTranslation[accomodation.rental.civility]).replace(\"[rent.firstname]\",accomodation.rental.firstname.toUpperCase()).replace(\"[rent.lastname]\",accomodation.rental.lastname.toUpperCase()).replace(\"[rent.city]\",accomodation.address.city.toUpperCase()).replace(\"[rent.street]\",accomodation.address.street.toUpperCase()).replace(\"[rent.postalCode]\",accomodation.address.postalCode.toUpperCase()).replace(\"[date.lastDay]\",lastDay[date.month]).replace(\"[date.month]\",date.month).replace(\"[date.year]\",date.year);return textTranslate;}useEffect(function(){setDateReceipt(date);},[date]);useEffect(function(){if(template.textBody!==undefined){var newTextBody=change(template.textBody);var newTextStart=change(template.textStart||\"\");var newTextEnd=change(template.textEnd||\"\");setTemplate(function(test){return _objectSpread(_objectSpread({},template),{},{textBody:newTextBody,textStart:newTextStart,textEnd:newTextEnd});});}},[template]);return/*#__PURE__*/React.createElement(\"div\",{id:\"divToPrint\"},/*#__PURE__*/React.createElement(\"div\",{class:\"divToPrint\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.pageBis},/*#__PURE__*/React.createElement(\"div\",{className:classes.destinataire},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},!owner.isSociety?owner.firstname.toUpperCase()+\" \"+owner.lastname.toUpperCase():owner.socialIdentity)),/*#__PURE__*/React.createElement(\"div\",{className:classes.destinataire},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},owner.address.street.toUpperCase())),/*#__PURE__*/React.createElement(\"div\",{className:classes.destinataire},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},owner.address.postalCode.toUpperCase()+\" \"+owner.address.city.toUpperCase())),/*#__PURE__*/React.createElement(\"div\",{className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\" \",accomodation.rental.isParticulier?accomodation.rental.firstname.toUpperCase()+\" \"+accomodation.rental.lastname.toUpperCase():accomodation.rental.socialIdentity)),/*#__PURE__*/React.createElement(\"div\",{className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},accomodation.address.street.toUpperCase())),/*#__PURE__*/React.createElement(\"div\",{className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},accomodation.address.postalCode.toUpperCase()+\" \"+accomodation.address.city.toUpperCase())),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(\"div\",{className:classes.destinataire},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},templateLocal.textStart),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},civilityTranslation[accomodation.rental.civility],\",\"),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},templateLocal.textBody)),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(\"div\",{className:classes.montant},/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\"Loyer :\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},accomodation.loyer.fixe,\",00\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:9},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\"Provision sur charges :\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3,className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},accomodation.loyer.charges,\",00\")),!accomodation.isCommercial&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\"TVA :\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\" \",accomodation.loyer.tva,\",00\"))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,className:classes.expediteur},\"------------\"),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\"Total :\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6,className:classes.expediteur},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},calculateTotal(),\",00\")))),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(\"div\",{className:classes.destinataire},/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},\"Veuillez agr\\xE9er,\",\" \",civilityTranslation[accomodation.rental.civility],\", l'expression de mes sentiments distingu\\xE9s\",\" \")),/*#__PURE__*/React.createElement(Divider,{className:classes.divider}),/*#__PURE__*/React.createElement(Typography,{variant:\"letter\"},templateLocal.textEnd))));};export default TemplateGenerator;","map":{"version":3,"sources":["/Users/charlottecetre/Desktop/Macron business/src/views/Settings/Components/TemplateGenerator.js"],"names":["React","useState","useEffect","makeStyles","Divider","Grid","Typography","database","lastDay","janvier","fevrier","mars","avril","mai","juin","juillet","aout","septembre","octobre","novembre","decembe","civilityTranslation","m","mme","useStyles","theme","root","padding","spacing","margin","content","marginBottom","destinataire","display","textAlign","expediteur","page","position","opacity","pointerEvents","fontSize","pageBis","divider","backgroundColor","palette","white","montant","width","TemplateGenerator","owner","accomodation","date","template","rest","classes","dateReceipt","setDateReceipt","templateLocal","setTemplate","calculateTotal","numFixe","Number","loyer","fixe","numCharges","charges","numTVA","isCommercial","undefined","tva","change","textChange","textTranslate","replace","rental","civility","firstname","toUpperCase","lastname","address","city","street","postalCode","month","year","textBody","newTextBody","newTextStart","textStart","newTextEnd","textEnd","test","isSociety","socialIdentity","isParticulier"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\n\nimport { Divider, Grid, Typography } from \"@material-ui/core\";\nimport { database } from \"firebase\";\n\nconst lastDay = {\n  janvier: 31,\n  fevrier: 28,\n  mars: 31,\n  avril: 30,\n  mai: 31,\n  juin: 30,\n  juillet: 31,\n  aout: 31,\n  septembre: 30,\n  octobre: 31,\n  novembre: 30,\n  decembe: 31,\n};\n\nconst civilityTranslation = {\n  m: \"Monsieur\",\n  mme: \"Madame\",\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(3),\n    margin: theme.spacing(2),\n  },\n  content: {\n    marginBottom: theme.spacing(2),\n  },\n  destinataire: {\n    display: \"row\",\n    textAlign: \"left\",\n  },\n  expediteur: {\n    textAlign: \"right\",\n  },\n  page: {\n    position: \"absolute\",\n    opacity: 0,\n    pointerEvents: \"none\",\n    fontSize: 30,\n  },\n  pageBis: {\n    padding: 30,\n    fontSize: 20,\n  },\n  divider: {\n    margin: 15,\n    backgroundColor: theme.palette.white,\n  },\n  montant: {\n    width: \"50%\",\n    textAlign: \"left\",\n  },\n}));\n\nconst TemplateGenerator = ({\n  owner,\n  accomodation,\n  date,\n  display,\n  template,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const [dateReceipt, setDateReceipt] = useState({});\n  const [templateLocal, setTemplate] = useState({});\n\n  function calculateTotal() {\n    var numFixe = Number(accomodation.loyer.fixe);\n    var numCharges = Number(accomodation.loyer.charges);\n    var numTVA =\n      accomodation.isCommercial == undefined\n        ? Number(accomodation.loyer.tva)\n        : 0;\n\n    return numFixe + numCharges + numTVA;\n  }\n\n  function change(textChange) {\n    var textTranslate = textChange\n      .replace(\n        \"[rent.civility]\",\n        civilityTranslation[accomodation.rental.civility]\n      )\n      .replace(\"[rent.firstname]\", accomodation.rental.firstname.toUpperCase())\n      .replace(\"[rent.lastname]\", accomodation.rental.lastname.toUpperCase())\n      .replace(\"[rent.city]\", accomodation.address.city.toUpperCase())\n      .replace(\"[rent.street]\", accomodation.address.street.toUpperCase())\n      .replace(\n        \"[rent.postalCode]\",\n        accomodation.address.postalCode.toUpperCase()\n      )\n      .replace(\"[date.lastDay]\", lastDay[date.month])\n      .replace(\"[date.month]\", date.month)\n      .replace(\"[date.year]\", date.year);\n\n    return textTranslate;\n  }\n\n  useEffect(() => {\n    setDateReceipt(date);\n  }, [date]);\n\n  useEffect(() => {\n    if (template.textBody !== undefined) {\n      var newTextBody = change(template.textBody);\n      var newTextStart = change(template.textStart || \"\");\n      var newTextEnd = change(template.textEnd || \"\");\n\n      setTemplate((test) => ({\n        ...template,\n        textBody: newTextBody,\n        textStart: newTextStart,\n        textEnd: newTextEnd,\n      }));\n    }\n  }, [template]);\n\n  return (\n    <div id=\"divToPrint\">\n      <div class=\"divToPrint\">\n        <div className={classes.pageBis}>\n          <div className={classes.destinataire}>\n            <Typography variant=\"letter\">\n              {!owner.isSociety\n                ? owner.firstname.toUpperCase() +\n                  \" \" +\n                  owner.lastname.toUpperCase()\n                : owner.socialIdentity}\n            </Typography>\n          </div>\n          <div className={classes.destinataire}>\n            <Typography variant=\"letter\">\n              {owner.address.street.toUpperCase()}\n            </Typography>\n          </div>\n          <div className={classes.destinataire}>\n            <Typography variant=\"letter\">\n              {owner.address.postalCode.toUpperCase() +\n                \" \" +\n                owner.address.city.toUpperCase()}\n            </Typography>\n          </div>\n          <div className={classes.expediteur}>\n            {\n              <Typography variant=\"letter\">\n                {\" \"}\n                {accomodation.rental.isParticulier\n                  ? accomodation.rental.firstname.toUpperCase() +\n                    \" \" +\n                    accomodation.rental.lastname.toUpperCase()\n                  : accomodation.rental.socialIdentity}\n              </Typography>\n            }\n          </div>\n          <div className={classes.expediteur}>\n            <Typography variant=\"letter\">\n              {accomodation.address.street.toUpperCase()}\n            </Typography>\n          </div>\n          <div className={classes.expediteur}>\n            <Typography variant=\"letter\">\n              {accomodation.address.postalCode.toUpperCase() +\n                \" \" +\n                accomodation.address.city.toUpperCase()}\n            </Typography>\n          </div>\n          <Divider className={classes.divider} />\n\n          <div className={classes.destinataire}>\n            <Typography variant=\"letter\">{templateLocal.textStart}</Typography>\n            <Divider className={classes.divider} />\n            <Typography variant=\"letter\">\n              {civilityTranslation[accomodation.rental.civility]},\n            </Typography>\n            <Divider className={classes.divider} />\n            <Typography variant=\"letter\">{templateLocal.textBody}</Typography>\n          </div>\n          <Divider className={classes.divider} />\n          <div className={classes.montant}>\n            <Grid container>\n              <Grid item xs={6}>\n                <Typography variant=\"letter\">Loyer :</Typography>\n              </Grid>\n              <Grid item xs={6} className={classes.expediteur}>\n                <Typography variant=\"letter\">\n                  {accomodation.loyer.fixe},00\n                </Typography>\n              </Grid>\n              <Grid item xs={9}>\n                <Typography variant=\"letter\">\n                  Provision sur charges :\n                </Typography>\n              </Grid>\n              <Grid item xs={3} className={classes.expediteur}>\n                <Typography variant=\"letter\">\n                  {accomodation.loyer.charges},00\n                </Typography>\n              </Grid>\n\n              {!accomodation.isCommercial && (\n                <>\n                  <Grid item xs={6}>\n                    <Typography variant=\"letter\">TVA :</Typography>\n                  </Grid>\n                  <Grid item xs={6} className={classes.expediteur}>\n                    <Typography variant=\"letter\">\n                      {\" \"}\n                      {accomodation.loyer.tva},00\n                    </Typography>\n                  </Grid>\n                </>\n              )}\n              <Grid item xs={6} />\n              <Grid item xs={6} className={classes.expediteur}>\n                ------------\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant=\"letter\">Total :</Typography>\n              </Grid>\n              <Grid item xs={6} className={classes.expediteur}>\n                <Typography variant=\"letter\">{calculateTotal()},00</Typography>\n              </Grid>\n            </Grid>\n          </div>\n          <Divider className={classes.divider} />\n          <div className={classes.destinataire}>\n            <Typography variant=\"letter\">\n              Veuillez agréer,{\" \"}\n              {civilityTranslation[accomodation.rental.civility]}, l'expression\n              de mes sentiments distingués{\" \"}\n            </Typography>\n          </div>\n          <Divider className={classes.divider} />\n          <Typography variant=\"letter\">{templateLocal.textEnd}</Typography>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TemplateGenerator;\n"]},"metadata":{},"sourceType":"module"}